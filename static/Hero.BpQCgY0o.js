import{r as _,c as M}from"./index.B3grc1aU.js";/* empty css                       */var ze={exports:{}},$t={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zn;function So(){if(Zn)return $t;Zn=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:o}}return $t.Fragment=t,$t.jsx=n,$t.jsxs=n,$t}var Qn;function Vo(){return Qn||(Qn=1,ze.exports=So()),ze.exports}var Yt=Vo();/* @license twgl.js 6.1.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const pn=5120,Xt=5121,dn=5122,hn=5123,fn=5124,mn=5125,vn=5126,Ro=32819,Lo=32820,Mo=33635,Io=5131,Bo=33640,Do=35899,Oo=35902,No=36269,Fo=34042,Dr={};{const e=Dr;e[pn]=Int8Array,e[Xt]=Uint8Array,e[dn]=Int16Array,e[hn]=Uint16Array,e[fn]=Int32Array,e[mn]=Uint32Array,e[vn]=Float32Array,e[Ro]=Uint16Array,e[Lo]=Uint16Array,e[Mo]=Uint16Array,e[Io]=Uint16Array,e[Bo]=Uint32Array,e[Do]=Uint32Array,e[Oo]=Uint32Array,e[No]=Uint32Array,e[Fo]=Uint32Array}function Or(e){if(e instanceof Int8Array)return pn;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Xt;if(e instanceof Int16Array)return dn;if(e instanceof Uint16Array)return hn;if(e instanceof Int32Array)return fn;if(e instanceof Uint32Array)return mn;if(e instanceof Float32Array)return vn;throw new Error("unsupported typed array type")}function Nr(e){if(e===Int8Array)return pn;if(e===Uint8Array||e===Uint8ClampedArray)return Xt;if(e===Int16Array)return dn;if(e===Uint16Array)return hn;if(e===Int32Array)return fn;if(e===Uint32Array)return mn;if(e===Float32Array)return vn;throw new Error("unsupported typed array type")}function zo(e){const t=Dr[e];if(!t)throw new Error("unknown gl type");return t}const Ze=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function jo(...e){console.error(...e)}const Jn=new Map;function Fr(e,t){if(!e||typeof e!="object")return!1;let n=Jn.get(t);n||(n=new WeakMap,Jn.set(t,n));let r=n.get(e);if(r===void 0){const i=Object.prototype.toString.call(e);r=i.substring(8,i.length-1)===t,n.set(e,r)}return r}function Uo(e,t){return typeof WebGLBuffer<"u"&&Fr(t,"WebGLBuffer")}function zr(e,t){return typeof WebGLTexture<"u"&&Fr(t,"WebGLTexture")}const jr=35044,Et=34962,$o=34963,Ko=34660,Ho=5120,qo=5121,Go=5122,Yo=5123,Xo=5124,Wo=5125,Ur=5126,$r={attribPrefix:""};function Zo(e,t,n,r,i){e.bindBuffer(t,n),e.bufferData(t,r,i||jr)}function Kr(e,t,n,r){if(Uo(e,t))return t;n=n||Et;const i=e.createBuffer();return Zo(e,n,i,t,r),i}function Hr(e){return e==="indices"}function Qo(e){return e===Int8Array||e===Uint8Array}function Jo(e){return e.length?e:e.data}const ts=/coord|texture/i,es=/color|colour/i;function ns(e,t){let n;if(ts.test(e)?n=2:es.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function rs(e,t,n){return e.numComponents||e.size||ns(t,n||Jo(e).length)}function qr(e,t){if(Ze(e))return e;if(Ze(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?bn(e.type):void 0;return n||(Hr(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function is(e){return typeof e=="number"?e:e?Nr(e):Ur}function bn(e){return typeof e=="number"?zo(e):e||Float32Array}function os(e,t){return{buffer:t.buffer,numValues:2*3*4,type:is(t.type),arrayType:bn(t.type)}}function ss(e,t){const n=t.data||t,r=bn(t.type),i=n*r.BYTES_PER_ELEMENT,o=e.createBuffer();return e.bindBuffer(Et,o),e.bufferData(Et,i,t.drawType||jr),{buffer:o,numValues:n,type:Nr(r),arrayType:r}}function as(e,t,n){const r=qr(t,n);return{arrayType:r.constructor,buffer:Kr(e,r,void 0,t.drawType),type:Or(r),numValues:0}}function ls(e,t){const n={};return Object.keys(t).forEach(function(r){if(!Hr(r)){const i=t[r],o=i.attrib||i.name||i.attribName||$r.attribPrefix+r;if(i.value){if(!Array.isArray(i.value)&&!Ze(i.value))throw new Error("array.value is not array or typedarray");n[o]={value:i.value}}else{let s;i.buffer&&i.buffer instanceof WebGLBuffer?s=os:typeof i=="number"||typeof i.data=="number"?s=ss:s=as;const{buffer:a,type:l,numValues:c,arrayType:p}=s(e,i,r),u=i.normalize!==void 0?i.normalize:Qo(p),f=rs(i,r,c);n[o]={buffer:a,numComponents:f,type:l,normalize:u,stride:i.stride||0,offset:i.offset||0,divisor:i.divisor===void 0?void 0:i.divisor,drawType:i.drawType}}}}),e.bindBuffer(Et,null),n}function cs(e,t){return t===Ho||t===qo?1:t===Go||t===Yo?2:t===Xo||t===Wo||t===Ur?4:0}const je=["position","positions","a_position"];function us(e,t){let n,r;for(r=0;r<je.length&&(n=je[r],!(n in t||(n=$r.attribPrefix+n,n in t)));++r);r===je.length&&(n=Object.keys(t)[0]);const i=t[n];if(!i.buffer)return 1;e.bindBuffer(Et,i.buffer);const o=e.getBufferParameter(Et,Ko);e.bindBuffer(Et,null);const s=cs(e,i.type),a=o/s,l=i.numComponents||i.size,c=a/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function tr(e,t,n){const r=ls(e,t),i=Object.assign({},n||{});i.attribs=Object.assign({},n?n.attribs:{},r);const o=t.indices;if(o){const s=qr(o,"indices");i.indices=Kr(e,s,$o),i.numElements=s.length,i.elementType=Or(s)}else i.numElements||(i.numElements=us(e,i.attribs));return i}function _n(e){return!!e.texStorage2D}const ps=function(){const e={},t={};function n(r){const i=r.constructor.name;if(!e[i]){for(const o in r)if(typeof r[o]=="number"){const s=t[r[o]];t[r[o]]=s?`${s} | ${o}`:o}e[i]=!0}}return function(i,o){return n(i),t[o]||(typeof o=="number"?`0x${o.toString(16)}`:o)}}(),gn=jo;function Gr(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const ge=33984,Pe=34962,ds=34963,hs=35713,fs=35714,ms=35632,vs=35633,bs=35981,Yr=35718,_s=35721,gs=35971,ws=35382,ys=35396,xs=35398,Cs=35392,Es=35395,ke=5126,Xr=35664,Wr=35665,Zr=35666,wn=5124,Qr=35667,Jr=35668,ti=35669,ei=35670,ni=35671,ri=35672,ii=35673,oi=35674,si=35675,ai=35676,Ps=35678,ks=35680,Ts=35679,As=35682,Ss=35685,Vs=35686,Rs=35687,Ls=35688,Ms=35689,Is=35690,Bs=36289,Ds=36292,Os=36293,yn=5125,li=36294,ci=36295,ui=36296,Ns=36298,Fs=36299,zs=36300,js=36303,Us=36306,$s=36307,Ks=36308,Hs=36311,Te=3553,Ae=34067,xn=32879,Se=35866,v={};function pi(e,t){return v[t].bindPoint}function qs(e,t){return function(n){e.uniform1f(t,n)}}function Gs(e,t){return function(n){e.uniform1fv(t,n)}}function Ys(e,t){return function(n){e.uniform2fv(t,n)}}function Xs(e,t){return function(n){e.uniform3fv(t,n)}}function Ws(e,t){return function(n){e.uniform4fv(t,n)}}function di(e,t){return function(n){e.uniform1i(t,n)}}function hi(e,t){return function(n){e.uniform1iv(t,n)}}function fi(e,t){return function(n){e.uniform2iv(t,n)}}function mi(e,t){return function(n){e.uniform3iv(t,n)}}function vi(e,t){return function(n){e.uniform4iv(t,n)}}function Zs(e,t){return function(n){e.uniform1ui(t,n)}}function Qs(e,t){return function(n){e.uniform1uiv(t,n)}}function Js(e,t){return function(n){e.uniform2uiv(t,n)}}function ta(e,t){return function(n){e.uniform3uiv(t,n)}}function ea(e,t){return function(n){e.uniform4uiv(t,n)}}function na(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function ra(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function ia(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function oa(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function sa(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function aa(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function la(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function ca(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function ua(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function q(e,t,n,r){const i=pi(e,t);return _n(e)?function(o){let s,a;!o||zr(e,o)?(s=o,a=null):(s=o.texture,a=o.sampler),e.uniform1i(r,n),e.activeTexture(ge+n),e.bindTexture(i,s),e.bindSampler(n,a)}:function(o){e.uniform1i(r,n),e.activeTexture(ge+n),e.bindTexture(i,o)}}function G(e,t,n,r,i){const o=pi(e,t),s=new Int32Array(i);for(let a=0;a<i;++a)s[a]=n+a;return _n(e)?function(a){e.uniform1iv(r,s),a.forEach(function(l,c){e.activeTexture(ge+s[c]);let p,u;!l||zr(e,l)?(p=l,u=null):(p=l.texture,u=l.sampler),e.bindSampler(n,u),e.bindTexture(o,p)})}:function(a){e.uniform1iv(r,s),a.forEach(function(l,c){e.activeTexture(ge+s[c]),e.bindTexture(o,l)})}}v[ke]={Type:Float32Array,size:4,setter:qs,arraySetter:Gs};v[Xr]={Type:Float32Array,size:8,setter:Ys,cols:2};v[Wr]={Type:Float32Array,size:12,setter:Xs,cols:3};v[Zr]={Type:Float32Array,size:16,setter:Ws,cols:4};v[wn]={Type:Int32Array,size:4,setter:di,arraySetter:hi};v[Qr]={Type:Int32Array,size:8,setter:fi,cols:2};v[Jr]={Type:Int32Array,size:12,setter:mi,cols:3};v[ti]={Type:Int32Array,size:16,setter:vi,cols:4};v[yn]={Type:Uint32Array,size:4,setter:Zs,arraySetter:Qs};v[li]={Type:Uint32Array,size:8,setter:Js,cols:2};v[ci]={Type:Uint32Array,size:12,setter:ta,cols:3};v[ui]={Type:Uint32Array,size:16,setter:ea,cols:4};v[ei]={Type:Uint32Array,size:4,setter:di,arraySetter:hi};v[ni]={Type:Uint32Array,size:8,setter:fi,cols:2};v[ri]={Type:Uint32Array,size:12,setter:mi,cols:3};v[ii]={Type:Uint32Array,size:16,setter:vi,cols:4};v[oi]={Type:Float32Array,size:32,setter:na,rows:2,cols:2};v[si]={Type:Float32Array,size:48,setter:ra,rows:3,cols:3};v[ai]={Type:Float32Array,size:64,setter:ia,rows:4,cols:4};v[Ss]={Type:Float32Array,size:32,setter:oa,rows:2,cols:3};v[Vs]={Type:Float32Array,size:32,setter:aa,rows:2,cols:4};v[Rs]={Type:Float32Array,size:48,setter:sa,rows:3,cols:2};v[Ls]={Type:Float32Array,size:48,setter:ca,rows:3,cols:4};v[Ms]={Type:Float32Array,size:64,setter:la,rows:4,cols:2};v[Is]={Type:Float32Array,size:64,setter:ua,rows:4,cols:3};v[Ps]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Te};v[ks]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Ae};v[Ts]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:xn};v[As]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Te};v[Bs]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Se};v[Ds]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Se};v[Os]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Ae};v[Ns]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Te};v[Fs]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:xn};v[zs]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Ae};v[js]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Se};v[Us]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Te};v[$s]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:xn};v[Ks]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Ae};v[Hs]={Type:null,size:0,setter:q,arraySetter:G,bindPoint:Se};function Ve(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Pe,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||ke,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function wt(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Pe,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||wn,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Re(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Pe,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||yn,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Cn(e,t,n){const r=n.size,i=n.count;return function(o){e.bindBuffer(Pe,o.buffer);const s=o.size||o.numComponents||r,a=s/i,l=o.type||ke,p=v[l].size*s,u=o.normalize||!1,f=o.offset||0,g=p/i;for(let b=0;b<i;++b)e.enableVertexAttribArray(t+b),e.vertexAttribPointer(t+b,a,l,u,p,f+g*b),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+b,o.divisor||0)}}const F={};F[ke]={size:4,setter:Ve};F[Xr]={size:8,setter:Ve};F[Wr]={size:12,setter:Ve};F[Zr]={size:16,setter:Ve};F[wn]={size:4,setter:wt};F[Qr]={size:8,setter:wt};F[Jr]={size:12,setter:wt};F[ti]={size:16,setter:wt};F[yn]={size:4,setter:Re};F[li]={size:8,setter:Re};F[ci]={size:12,setter:Re};F[ui]={size:16,setter:Re};F[ei]={size:4,setter:wt};F[ni]={size:8,setter:wt};F[ri]={size:12,setter:wt};F[ii]={size:16,setter:wt};F[oi]={size:4,setter:Cn,count:2};F[si]={size:9,setter:Cn,count:3};F[ai]={size:16,setter:Cn,count:4};const pa=/ERROR:\s*\d+:(\d+)/gi;function da(e,t="",n=0){const r=[...t.matchAll(pa)],i=new Map(r.map((o,s)=>{const a=parseInt(o[1]),l=r[s+1],c=l?l.index:t.length,p=t.substring(o.index,c);return[a-1,p]}));return e.split(`
`).map((o,s)=>{const a=i.get(s);return`${s+1+n}: ${o}${a?`

^^^ ${a}`:""}`}).join(`
`)}const er=/^[ \t]*\n/;function bi(e){let t=0;return er.test(e)&&(t=1,e=e.replace(er,"")),{lineOffset:t,shaderSource:e}}function ha(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function fa(e,t,n,r){if(r=r||gn,!e.getShaderParameter(n,hs)){const o=e.getShaderInfoLog(n),{lineOffset:s,shaderSource:a}=bi(e.getShaderSource(n)),l=`${da(a,o,s)}
Error compiling ${ps(e,t)}: ${o}`;return r(l),l}return""}function En(e,t,n){let r,i,o;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const c=e;n=c.errorCallback,e=c.attribLocations,r=c.transformFeedbackVaryings,i=c.transformFeedbackMode,o=c.callback}const s=n||gn,a=[],l={errorCallback(c,...p){a.push(c),s(c,...p)},transformFeedbackVaryings:r,transformFeedbackMode:i,callback:o,errors:a};{let c={};Array.isArray(e)?e.forEach(function(p,u){c[p]=t?t[u]:u}):c=e||{},l.attribLocations=c}return l}const ma=["VERTEX_SHADER","FRAGMENT_SHADER"];function va(e,t){if(t.indexOf("frag")>=0)return ms;if(t.indexOf("vert")>=0)return vs}function ba(e,t,n){const r=e.getAttachedShaders(t);for(const i of r)n.has(i)||e.deleteShader(i);e.deleteProgram(t)}const _a=(e=0)=>new Promise(t=>setTimeout(t,e));function ga(e,t,n){const r=e.createProgram(),{attribLocations:i,transformFeedbackVaryings:o,transformFeedbackMode:s}=En(n);for(let a=0;a<t.length;++a){let l=t[a];if(typeof l=="string"){const c=Gr(l),p=c?c.text:l;let u=e[ma[a]];c&&c.type&&(u=va(e,c.type)||u),l=e.createShader(u),e.shaderSource(l,bi(p).shaderSource),e.compileShader(l)}e.attachShader(r,l)}Object.entries(i).forEach(([a,l])=>e.bindAttribLocation(r,l,a));{let a=o;a&&(a.attribs&&(a=a.attribs),Array.isArray(a)||(a=Object.keys(a)),e.transformFeedbackVaryings(r,a,s||bs))}return e.linkProgram(r),r}function wa(e,t,n,r,i){const o=En(n,r,i),s=new Set(t),a=ga(e,t,o);function l(c,p){const u=xa(c,p,o.errorCallback);return u&&ba(c,p,s),u}if(o.callback){ya(e,a).then(()=>{const c=l(e,a);o.callback(c,c?void 0:a)});return}return l(e,a)?void 0:a}async function ya(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),r=n?(o,s)=>o.getProgramParameter(s,n.COMPLETION_STATUS_KHR):()=>!0;let i=0;do await _a(i),i=1e3/60;while(!r(e,t))}function xa(e,t,n){if(n=n||gn,!e.getProgramParameter(t,fs)){const i=e.getProgramInfoLog(t);n(`Error in program linking: ${i}`);const s=e.getAttachedShaders(t).map(a=>fa(e,e.getShaderParameter(a,e.SHADER_TYPE),a,n));return`${i}
${s.filter(a=>a).join(`
`)}`}}function Ca(e,t,n,r,i){return wa(e,t,n,r,i)}function _i(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const Ea=/(\.|\[|]|\w+)/g,Pa=e=>e>="0"&&e<="9";function ka(e,t,n,r){const i=e.split(Ea).filter(a=>a!=="");let o=0,s="";for(;;){const a=i[o++];s+=a;const l=Pa(a[0]),c=l?parseInt(a):a;if(l&&(s+=i[o++]),o===i.length){n[c]=t;break}else{const u=i[o++],f=u==="[",g=n[c]||(f?[]:{});n[c]=g,n=g,r[s]=r[s]||function(b){return function(y){gi(b,y)}}(g),s+=u}}}function Ta(e,t){let n=0;function r(a,l,c){const p=l.name.endsWith("[0]"),u=l.type,f=v[u];if(!f)throw new Error(`unknown type: 0x${u.toString(16)}`);let g;if(f.bindPoint){const b=n;n+=l.size,p?g=f.arraySetter(e,u,b,c,l.size):g=f.setter(e,u,b,c,l.size)}else f.arraySetter&&p?g=f.arraySetter(e,c):g=f.setter(e,c);return g.location=c,g}const i={},o={},s=e.getProgramParameter(t,Yr);for(let a=0;a<s;++a){const l=e.getActiveUniform(t,a);if(_i(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const p=e.getUniformLocation(t,l.name);if(p){const u=r(t,l,p);i[c]=u,ka(c,u,o,i)}}return i}function Aa(e,t){const n={},r=e.getProgramParameter(t,gs);for(let i=0;i<r;++i){const o=e.getTransformFeedbackVarying(t,i);n[o.name]={index:i,type:o.type,size:o.size}}return n}function Sa(e,t){const n=e.getProgramParameter(t,Yr),r=[],i=[];for(let a=0;a<n;++a){i.push(a),r.push({});const l=e.getActiveUniform(t,a);r[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],c=a[1];e.getActiveUniforms(t,i,e[l]).forEach(function(p,u){r[u][c]=p})});const o={},s=e.getProgramParameter(t,ws);for(let a=0;a<s;++a){const l=e.getActiveUniformBlockName(t,a),c={index:e.getUniformBlockIndex(t,l),usedByVertexShader:e.getActiveUniformBlockParameter(t,a,ys),usedByFragmentShader:e.getActiveUniformBlockParameter(t,a,xs),size:e.getActiveUniformBlockParameter(t,a,Cs),uniformIndices:e.getActiveUniformBlockParameter(t,a,Es)};c.used=c.usedByVertexShader||c.usedByFragmentShader,o[l]=c}return{blockSpecs:o,uniformData:r}}function gi(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):gi(e[n],t[n])}}function Qe(e,...t){const n=e.uniformSetters||e,r=t.length;for(let i=0;i<r;++i){const o=t[i];if(Array.isArray(o)){const s=o.length;for(let a=0;a<s;++a)Qe(n,o[a])}else for(const s in o){const a=n[s];a&&a(o[s])}}}function Va(e,t){const n={},r=e.getProgramParameter(t,_s);for(let i=0;i<r;++i){const o=e.getActiveAttrib(t,i);if(_i(o))continue;const s=e.getAttribLocation(t,o.name),a=F[o.type],l=a.setter(e,s,a);l.location=s,n[o.name]=l}return n}function Ra(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function nr(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Ra(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(ds,n.indices))}function rr(e,t){const n=Ta(e,t),r=Va(e,t),i={program:t,uniformSetters:n,attribSetters:r,uniformLocations:Object.fromEntries(Object.entries(n).map(([o,s])=>[o,s.location])),attribLocations:Object.fromEntries(Object.entries(r).map(([o,s])=>[o,s.location]))};return _n(e)&&(i.uniformBlockSpec=Sa(e,t),i.transformFeedbackInfo=Aa(e,t)),i}const La=/\s|{|}|;/;function ir(e,t,n,r,i){const o=En(n,r,i),s=[];if(t=t.map(function(c){if(!La.test(c)){const p=Gr(c);if(p)c=p.text;else{const u=`no element with id: ${c}`;o.errorCallback(u),s.push(u)}}return c}),s.length)return ha(o,"");const a=o.callback;a&&(o.callback=(c,p)=>{a(c,c?void 0:rr(e,p))});const l=Ca(e,t,o);return l?rr(e,l):null}const Ma=4,or=5123;function sr(e,t,n,r,i,o){n=n===void 0?Ma:n;const s=t.indices,a=t.elementType,l=r===void 0?t.numElements:r;i=i===void 0?0:i,a||s?o!==void 0?e.drawElementsInstanced(n,l,a===void 0?or:t.elementType,i,o):e.drawElements(n,l,a===void 0?or:t.elementType,i):o!==void 0?e.drawArraysInstanced(n,i,l,o):e.drawArrays(n,i,l)}function Ia(e){const t=_.useRef(performance.now());_.useEffect(()=>{let n;const r=i=>{const o=i-t.current;t.current=i,e(o,i),n=requestAnimationFrame(r)};return n=requestAnimationFrame(r),()=>{cancelAnimationFrame(n)}},[e])}function Ba(e){const[t,n]=_.useState(null),[r,i]=_.useState(null);return _.useEffect(()=>{if(t){const o=e.contextId||"2d",s=e.contextAttributes!==void 0?t.getContext(o,e.contextAttributes):t.getContext(o);if(s){if(i(s),"width"in e&&"height"in e)return t.width=e.width,t.height=e.height,e.setup?.(s,t);{const a=new ResizeObserver(()=>{t.width=t.clientWidth,t.height=t.clientHeight,e.resize?.(s,t)});a.observe(t);const l=e.setup?.(s,t);return()=>{a.disconnect(),l?.()}}}else console.error(`Failed to get context: ${o}`),i(null)}else i(null)},[t,e.contextAttributes]),[r,t,n]}function Ue(e,t,n){_.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t,n])}function ar(e,t){return(e%t+t)%t}class X{constructor(t,n,r){this.x=t,this.y=n,this.z=r}getX(){return this.x}getY(){return this.y}getZ(){return this.z}add(t){return new X(this.x+t.x,this.y+t.y,this.z+t.z)}add2(t){return new X(this.x+t.x,this.y+t.y,this.z)}sub(t){return new X(this.x-t.x,this.y-t.y,this.z-t.z)}sub2(t){return new X(this.x-t.x,this.y-t.y,this.z)}mult(t){return new X(this.x*t,this.y*t,this.z*t)}mult3(t){return new X(this.x*t.x,this.y*t.y,this.z*t.z)}divide(t){return new X(this.x/t,this.y/t,this.z/t)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){const t=this.length();return new X(this.x/t,this.y/t,this.z/t)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new X(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}abs(){return new X(Math.abs(this.x),Math.abs(this.y),Math.abs(this.z))}rotateBy(t){let n=Math.cos(t.x),r=Math.sin(t.x);const i={x:this.x,y:this.y,z:this.z};let o=i.y*n-i.z*r,s=i.y*r+i.z*n;i.y=o,i.z=s,n=Math.cos(t.y),r=Math.sin(t.y);let a=i.x*n+i.z*r;return s=-i.x*r+i.z*n,i.x=a,i.z=s,n=Math.cos(t.z),r=Math.sin(t.z),a=i.x*n-i.y*r,o=i.x*r+i.y*n,i.x=a,i.y=o,new X(i.x,i.y,i.z)}xy(){return new I(this.x,this.y)}clone(){return new X(this.x,this.y,this.z)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}}class I{x;y;constructor(...t){if(t[0]instanceof Object){this.x=t[0].x,this.y=t[0].y;return}this.x=t[0],this.y=t[1]??t[0]}static fromAngle(t,n=1){return new I(Math.cos(t)*n,Math.sin(t)*n)}add(t){return new I(this.x+t.x,this.y+t.y)}sub(t){return new I(this.x-t.x,this.y-t.y)}mult(t,n){return t instanceof I?new I(this.x*t.x,this.y*t.y):new I(this.x*t,this.y*(n??t))}div(t,n){return t instanceof I?new I(this.x/t.x,this.y/t.y):new I(this.x/t,this.y/(n??t))}mod(t){return new I(ar(this.x,t.x),ar(this.y,t.y))}directionTo(t){return t.sub(this).normalize()}isNaN(){return isNaN(this.x)||isNaN(this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}setLength(t){return this.normalize().mult(t)}lenSq(){return this.x*this.x+this.y*this.y}normalize(){const t=this.length();return new I(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}rotate(t){const n=Math.cos(t),r=Math.sin(t);return new I(this.x*n-this.y*r,this.x*r+this.y*n)}cw90(){return new I(this.y,-this.x)}ccw90(){return new I(-this.y,this.x)}setMag(t){return this.normalize().mult(t)}angle(){return Math.atan2(this.y,this.x)}dist(t){return this.sub(t).length()}distSq(t){return this.sub(t).lenSq()}cross(t){return this.x*t.y-this.y*t.x}isPerpendicular(t){return this.dot(t)===0}isParallel(t){return this.cross(t)===0}angleTo(t){return t.sub(this).angle()}lerp(t,n){return this.add(t.sub(this).mult(n))}avg(t){return this.add(t).mult(.5)}swap(){return new I(this.y,this.x)}abs(){return new I(Math.abs(this.x),Math.abs(this.y))}sign(){return new I(Math.sign(this.x),Math.sign(this.y))}to3(t=0){return new X(this.x,this.y,t)}clone(){return new I(this.x,this.y)}toString(){return`(${this.x}, ${this.y})`}equals(t){return this.x===t.x&&this.y===t.y}get a(){return[this.x,this.y]}}function wi(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=wi(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Pt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=wi(e))&&(r&&(r+=" "),r+=t);return r}function Da(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Da(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var re=e=>typeof e=="number"&&!isNaN(e),Tt=e=>typeof e=="string",ut=e=>typeof e=="function",Oa=e=>Tt(e)||re(e),Je=e=>Tt(e)||ut(e)?e:null,Na=(e,t)=>e===!1||re(e)&&e>0?e:t,tn=e=>_.isValidElement(e)||Tt(e)||ut(e)||re(e);function Fa(e,t,n=300){let{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}function za({enter:e,exit:t,appendPosition:n=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:o,position:s,preventExitTransition:a,done:l,nodeRef:c,isIn:p,playToast:u}){let f=n?`${e}--${s}`:e,g=n?`${t}--${s}`:t,b=_.useRef(0);return _.useLayoutEffect(()=>{let y=c.current,T=f.split(" "),E=d=>{d.target===c.current&&(u(),y.removeEventListener("animationend",E),y.removeEventListener("animationcancel",E),b.current===0&&d.type!=="animationcancel"&&y.classList.remove(...T))};y.classList.add(...T),y.addEventListener("animationend",E),y.addEventListener("animationcancel",E)},[]),_.useEffect(()=>{let y=c.current,T=()=>{y.removeEventListener("animationend",T),r?Fa(y,l,i):l()};p||(a?T():(b.current=1,y.className+=` ${g}`,y.addEventListener("animationend",T)))},[p]),M.createElement(M.Fragment,null,o)}}function lr(e,t){return{content:yi(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function yi(e,t,n=!1){return _.isValidElement(e)&&!Tt(e.type)?_.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):ut(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function ja({closeToast:e,theme:t,ariaLabel:n="close"}){return M.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:r=>{r.stopPropagation(),e(!0)},"aria-label":n},M.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},M.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Ua({delay:e,isRunning:t,closeToast:n,type:r="default",hide:i,className:o,controlledProgress:s,progress:a,rtl:l,isIn:c,theme:p}){let u=i||s&&a===0,f={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};s&&(f.transform=`scaleX(${a})`);let g=Pt("Toastify__progress-bar",s?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":l}),b=ut(o)?o({rtl:l,type:r,defaultClassName:g}):Pt(g,o),y={[s&&a>=1?"onTransitionEnd":"onAnimationEnd"]:s&&a<1?null:()=>{c&&n()}};return M.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":u},M.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${p} Toastify__progress-bar--${r}`}),M.createElement("div",{role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:b,style:f,...y}))}var $a=1,xi=()=>`${$a++}`;function Ka(e,t,n){let r=1,i=0,o=[],s=[],a=t,l=new Map,c=new Set,p=d=>(c.add(d),()=>c.delete(d)),u=()=>{s=Array.from(l.values()),c.forEach(d=>d())},f=({containerId:d,toastId:h,updateId:m})=>{let x=d?d!==e:e!==1,R=l.has(h)&&m==null;return x||R},g=(d,h)=>{l.forEach(m=>{var x;(h==null||h===m.props.toastId)&&((x=m.toggle)==null||x.call(m,d))})},b=d=>{var h,m;(m=(h=d.props)==null?void 0:h.onClose)==null||m.call(h,d.removalReason),d.isActive=!1},y=d=>{if(d==null)l.forEach(b);else{let h=l.get(d);h&&b(h)}u()},T=()=>{i-=o.length,o=[]},E=d=>{var h,m;let{toastId:x,updateId:R}=d.props,C=R==null;d.staleId&&l.delete(d.staleId),d.isActive=!0,l.set(x,d),u(),n(lr(d,C?"added":"updated")),C&&((m=(h=d.props).onOpen)==null||m.call(h))};return{id:e,props:a,observe:p,toggle:g,removeToast:y,toasts:l,clearQueue:T,buildToast:(d,h)=>{if(f(h))return;let{toastId:m,updateId:x,data:R,staleId:C,delay:P}=h,N=x==null;N&&i++;let U={...a,style:a.toastStyle,key:r++,...Object.fromEntries(Object.entries(h).filter(([st,Mt])=>Mt!=null)),toastId:m,updateId:x,data:R,isIn:!1,className:Je(h.className||a.toastClassName),progressClassName:Je(h.progressClassName||a.progressClassName),autoClose:h.isLoading?!1:Na(h.autoClose,a.autoClose),closeToast(st){l.get(m).removalReason=st,y(m)},deleteToast(){let st=l.get(m);if(st!=null){if(n(lr(st,"removed")),l.delete(m),i--,i<0&&(i=0),o.length>0){E(o.shift());return}u()}}};U.closeButton=a.closeButton,h.closeButton===!1||tn(h.closeButton)?U.closeButton=h.closeButton:h.closeButton===!0&&(U.closeButton=tn(a.closeButton)?a.closeButton:!0);let $={content:d,props:U,staleId:C};a.limit&&a.limit>0&&i>a.limit&&N?o.push($):re(P)?setTimeout(()=>{E($)},P):E($)},setProps(d){a=d},setToggle:(d,h)=>{let m=l.get(d);m&&(m.toggle=h)},isToastActive:d=>{var h;return(h=l.get(d))==null?void 0:h.isActive},getSnapshot:()=>s}}var K=new Map,Wt=[],en=new Set,Ha=e=>en.forEach(t=>t(e)),Ci=()=>K.size>0;function qa(){Wt.forEach(e=>Pi(e.content,e.options)),Wt=[]}var Ga=(e,{containerId:t})=>{var n;return(n=K.get(t||1))==null?void 0:n.toasts.get(e)};function Ei(e,t){var n;if(t)return!!((n=K.get(t))!=null&&n.isToastActive(e));let r=!1;return K.forEach(i=>{i.isToastActive(e)&&(r=!0)}),r}function Ya(e){if(!Ci()){Wt=Wt.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Oa(e))K.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=K.get(e.containerId);t?t.removeToast(e.id):K.forEach(n=>{n.removeToast(e.id)})}}var Xa=(e={})=>{K.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function Pi(e,t){tn(e)&&(Ci()||Wt.push({content:e,options:t}),K.forEach(n=>{n.buildToast(e,t)}))}function Wa(e){var t;(t=K.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function ki(e,t){K.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function Za(e){let t=e.containerId||1;return{subscribe(n){let r=Ka(t,e,Ha);K.set(t,r);let i=r.observe(n);return qa(),()=>{i(),K.delete(t)}},setProps(n){var r;(r=K.get(t))==null||r.setProps(n)},getSnapshot(){var n;return(n=K.get(t))==null?void 0:n.getSnapshot()}}}function Qa(e){return en.add(e),()=>{en.delete(e)}}function Ja(e){return e&&(Tt(e.toastId)||re(e.toastId))?e.toastId:xi()}function ie(e,t){return Pi(e,t),t.toastId}function Le(e,t){return{...t,type:t&&t.type||e,toastId:Ja(t)}}function Me(e){return(t,n)=>ie(t,Le(e,n))}function S(e,t){return ie(e,Le("default",t))}S.loading=(e,t)=>ie(e,Le("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function tl(e,{pending:t,error:n,success:r},i){let o;t&&(o=Tt(t)?S.loading(t,i):S.loading(t.render,{...i,...t}));let s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(c,p,u)=>{if(p==null){S.dismiss(o);return}let f={type:c,...s,...i,data:u},g=Tt(p)?{render:p}:p;return o?S.update(o,{...f,...g}):S(g.render,{...f,...g}),u},l=ut(e)?e():e;return l.then(c=>a("success",r,c)).catch(c=>a("error",n,c)),l}S.promise=tl;S.success=Me("success");S.info=Me("info");S.error=Me("error");S.warning=Me("warning");S.warn=S.warning;S.dark=(e,t)=>ie(e,Le("default",{theme:"dark",...t}));function el(e){Ya(e)}S.dismiss=el;S.clearWaitingQueue=Xa;S.isActive=Ei;S.update=(e,t={})=>{let n=Ga(e,t);if(n){let{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:xi()};o.toastId!==e&&(o.staleId=e);let s=o.render||i;delete o.render,ie(s,o)}};S.done=e=>{S.update(e,{progress:1})};S.onChange=Qa;S.play=e=>ki(!0,e);S.pause=e=>ki(!1,e);function nl(e){var t;let{subscribe:n,getSnapshot:r,setProps:i}=_.useRef(Za(e)).current;i(e);let o=(t=_.useSyncExternalStore(n,r,r))==null?void 0:t.slice();function s(a){if(!o)return[];let l=new Map;return e.newestOnTop&&o.reverse(),o.forEach(c=>{let{position:p}=c.props;l.has(p)||l.set(p,[]),l.get(p).push(c)}),Array.from(l,c=>a(c[0],c[1]))}return{getToastToRender:s,isToastActive:Ei,count:o?.length}}function rl(e){let[t,n]=_.useState(!1),[r,i]=_.useState(!1),o=_.useRef(null),s=_.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:p,closeOnClick:u}=e;Wa({id:e.toastId,containerId:e.containerId,fn:n}),_.useEffect(()=>{if(e.pauseOnFocusLoss)return f(),()=>{g()}},[e.pauseOnFocusLoss]);function f(){document.hasFocus()||E(),window.addEventListener("focus",T),window.addEventListener("blur",E)}function g(){window.removeEventListener("focus",T),window.removeEventListener("blur",E)}function b(C){if(e.draggable===!0||e.draggable===C.pointerType){d();let P=o.current;s.canCloseOnClick=!0,s.canDrag=!0,P.style.transition="none",e.draggableDirection==="x"?(s.start=C.clientX,s.removalDistance=P.offsetWidth*(e.draggablePercent/100)):(s.start=C.clientY,s.removalDistance=P.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function y(C){let{top:P,bottom:N,left:U,right:$}=o.current.getBoundingClientRect();C.nativeEvent.type!=="touchend"&&e.pauseOnHover&&C.clientX>=U&&C.clientX<=$&&C.clientY>=P&&C.clientY<=N?E():T()}function T(){n(!0)}function E(){n(!1)}function d(){s.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",x)}function h(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",x)}function m(C){let P=o.current;if(s.canDrag&&P){s.didMove=!0,t&&E(),e.draggableDirection==="x"?s.delta=C.clientX-s.start:s.delta=C.clientY-s.start,s.start!==C.clientX&&(s.canCloseOnClick=!1);let N=e.draggableDirection==="x"?`${s.delta}px, var(--y)`:`0, calc(${s.delta}px + var(--y))`;P.style.transform=`translate3d(${N},0)`,P.style.opacity=`${1-Math.abs(s.delta/s.removalDistance)}`}}function x(){h();let C=o.current;if(s.canDrag&&s.didMove&&C){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance){i(!0),e.closeToast(!0),e.collapseAll();return}C.style.transition="transform 0.2s, opacity 0.2s",C.style.removeProperty("transform"),C.style.removeProperty("opacity")}}let R={onPointerDown:b,onPointerUp:y};return a&&l&&(R.onMouseEnter=E,e.stacked||(R.onMouseLeave=T)),u&&(R.onClick=C=>{p&&p(C),s.canCloseOnClick&&c(!0)}),{playToast:T,pauseToast:E,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:R}}var il=typeof window<"u"?_.useLayoutEffect:_.useEffect,Ie=({theme:e,type:t,isLoading:n,...r})=>M.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...r});function ol(e){return M.createElement(Ie,{...e},M.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function sl(e){return M.createElement(Ie,{...e},M.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function al(e){return M.createElement(Ie,{...e},M.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ll(e){return M.createElement(Ie,{...e},M.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function cl(){return M.createElement("div",{className:"Toastify__spinner"})}var nn={info:sl,warning:ol,success:al,error:ll,spinner:cl},ul=e=>e in nn;function pl({theme:e,type:t,isLoading:n,icon:r}){let i=null,o={theme:e,type:t};return r===!1||(ut(r)?i=r({...o,isLoading:n}):_.isValidElement(r)?i=_.cloneElement(r,o):n?i=nn.spinner():ul(t)&&(i=nn[t](o))),i}var dl=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:o}=rl(e),{closeButton:s,children:a,autoClose:l,onClick:c,type:p,hideProgressBar:u,closeToast:f,transition:g,position:b,className:y,style:T,progressClassName:E,updateId:d,role:h,progress:m,rtl:x,toastId:R,deleteToast:C,isIn:P,isLoading:N,closeOnClick:U,theme:$,ariaLabel:st}=e,Mt=Pt("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":U}),Fe=ut(y)?y({rtl:x,position:b,type:p,defaultClassName:Mt}):Pt(Mt,y),nt=pl(e),yt=!!m||!l,xt={closeToast:f,type:p,theme:$},me=null;return s===!1||(ut(s)?me=s(xt):_.isValidElement(s)?me=_.cloneElement(s,xt):me=ja(xt)),M.createElement(g,{isIn:P,done:C,position:b,preventExitTransition:n,nodeRef:r,playToast:o},M.createElement("div",{id:R,tabIndex:0,onClick:c,"data-in":P,className:Fe,...i,style:T,ref:r,...P&&{role:h,"aria-label":st}},nt!=null&&M.createElement("div",{className:Pt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},nt),yi(a,e,!t),me,!e.customProgressBar&&M.createElement(Ua,{...d&&!yt?{key:`p-${d}`}:{},rtl:x,theme:$,delay:l,isRunning:t,isIn:P,closeToast:f,hide:u,type:p,className:E,controlledProgress:yt,progress:m||0})))},hl=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),fl=za(hl("bounce",!0)),ml={position:"top-right",transition:fl,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function vl(e){let t={...ml,...e},n=e.stacked,[r,i]=_.useState(!0),o=_.useRef(null),{getToastToRender:s,isToastActive:a,count:l}=nl(t),{className:c,style:p,rtl:u,containerId:f,hotKeys:g}=t;function b(T){let E=Pt("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":u});return ut(c)?c({position:T,rtl:u,defaultClassName:E}):Pt(E,Je(c))}function y(){n&&(i(!0),S.play())}return il(()=>{var T;if(n){let E=o.current.querySelectorAll('[data-in="true"]'),d=12,h=(T=t.position)==null?void 0:T.includes("top"),m=0,x=0;Array.from(E).reverse().forEach((R,C)=>{let P=R;P.classList.add("Toastify__toast--stacked"),C>0&&(P.dataset.collapsed=`${r}`),P.dataset.pos||(P.dataset.pos=h?"top":"bot");let N=m*(r?.2:1)+(r?0:d*C);P.style.setProperty("--y",`${h?N:N*-1}px`),P.style.setProperty("--g",`${d}`),P.style.setProperty("--s",`${1-(r?x:0)}`),m+=P.offsetHeight,x+=.025})}},[r,l,n]),_.useEffect(()=>{function T(E){var d;let h=o.current;g(E)&&((d=h.querySelector('[tabIndex="0"]'))==null||d.focus(),i(!1),S.pause()),E.key==="Escape"&&(document.activeElement===h||h!=null&&h.contains(document.activeElement))&&(i(!0),S.play())}return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[g]),M.createElement("section",{ref:o,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),S.pause())},onMouseLeave:y,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},s((T,E)=>{let d=E.length?{...p}:{...p,pointerEvents:"none"};return M.createElement("div",{tabIndex:-1,className:b(T),"data-stacked":n,style:d,key:`c-${T}`},E.map(({content:h,props:m})=>M.createElement(dl,{...m,stacked:n,collapseAll:y,isIn:a(m.toastId,m.containerId),key:`t-${m.key}`},h)))}))}/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function L(e){return e==null}function Pn(e){return e!==null&&typeof e=="object"}function rn(e){return e!==null&&typeof e=="object"}function bl(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function At(e,t){return Array.from(new Set([...Object.keys(e),...Object.keys(t)])).reduce((r,i)=>{const o=e[i],s=t[i];return rn(o)&&rn(s)?Object.assign(Object.assign({},r),{[i]:At(o,s)}):Object.assign(Object.assign({},r),{[i]:i in t?s:o})},{})}function kn(e){return Pn(e)?"target"in e:!1}const _l={alreadydisposed:()=>"View has been already disposed",invalidparams:e=>`Invalid parameters for '${e.name}'`,nomatchingcontroller:e=>`No matching controller for '${e.key}'`,nomatchingview:e=>`No matching view for '${JSON.stringify(e.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:e=>`Not compatible with  plugin '${e.id}'`,propertynotfound:e=>`Property '${e.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class O{static alreadyDisposed(){return new O({type:"alreadydisposed"})}static notBindable(){return new O({type:"notbindable"})}static notCompatible(t,n){return new O({type:"notcompatible",context:{id:`${t}.${n}`}})}static propertyNotFound(t){return new O({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new O({type:"shouldneverhappen"})}constructor(t){var n;this.message=(n=_l[t.type](t.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class we{constructor(t,n){this.obj_=t,this.key=n}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,n){const r=this.read();if(!we.isBindable(r))throw O.notBindable();if(!(t in r))throw O.propertyNotFound(t);r[t]=n}}class z{constructor(){this.observers_={}}on(t,n,r){var i;let o=this.observers_[t];return o||(o=this.observers_[t]=[]),o.push({handler:n,key:(i=r?.key)!==null&&i!==void 0?i:n}),this}off(t,n){const r=this.observers_[t];return r&&(this.observers_[t]=r.filter(i=>i.key!==n)),this}emit(t,n){const r=this.observers_[t];r&&r.forEach(i=>{i.handler(n)})}}class gl{constructor(t,n){var r;this.constraint_=n?.constraint,this.equals_=(r=n?.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new z,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}}class wl{constructor(t){this.emitter=new z,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===t&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class yl{constructor(t){this.emitter=new z,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function B(e,t){const n=t?.constraint,r=t?.equals;return!n&&!r?new wl(e):new gl(e,t)}function xl(e){return[new yl(e),(t,n)=>{e.setRawValue(t,n)}]}class w{constructor(t){this.emitter=new z,this.valMap_=t;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(t){return Object.keys(t).reduce((r,i)=>Object.assign(r,{[i]:B(t[i])}),{})}static fromObject(t){const n=this.createCore(t);return new w(n)}get(t){return this.valMap_[t].rawValue}set(t,n){this.valMap_[t].rawValue=n}value(t){return this.valMap_[t]}}class oe{constructor(t){this.values=w.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(t,r),n)}}class Cl{constructor(t){this.values=w.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");let i=t;return L(r)||(i=Math.max(i,r)),L(n)||(i=Math.min(i,n)),i}}class El{constructor(t,n=0){this.step=t,this.origin=n}constrain(t){const n=this.origin%this.step,r=Math.round((t-n)/this.step);return n+r*this.step}}class Pl{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const kl={"**":(e,t)=>Math.pow(e,t),"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t,"&":(e,t)=>e&t,"^":(e,t)=>e^t,"|":(e,t)=>e|t};class Tl{constructor(t,n,r){this.left=n,this.operator=t,this.right=r}evaluate(){const t=kl[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Al={"+":e=>e,"-":e=>-e,"~":e=>~e};class Sl{constructor(t,n){this.operator=t,this.expression=n}evaluate(){const t=Al[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Tn(e){return(t,n)=>{for(let r=0;r<e.length;r++){const i=e[r](t,n);if(i!=="")return i}return""}}function Zt(e,t){var n;const r=e.substr(t).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function Vl(e,t){const n=e.substr(t,1);return n.match(/^[1-9]$/)?n:""}function Qt(e,t){var n;const r=e.substr(t).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function Rl(e,t){const n=Qt(e,t);if(n!=="")return n;const r=e.substr(t,1);if(t+=1,r!=="-"&&r!=="+")return"";const i=Qt(e,t);return i===""?"":r+i}function An(e,t){const n=e.substr(t,1);if(t+=1,n.toLowerCase()!=="e")return"";const r=Rl(e,t);return r===""?"":n+r}function Ti(e,t){const n=e.substr(t,1);if(n==="0")return n;const r=Vl(e,t);return t+=r.length,r===""?"":r+Qt(e,t)}function Ll(e,t){const n=Ti(e,t);if(t+=n.length,n==="")return"";const r=e.substr(t,1);if(t+=r.length,r!==".")return"";const i=Qt(e,t);return t+=i.length,n+r+i+An(e,t)}function Ml(e,t){const n=e.substr(t,1);if(t+=n.length,n!==".")return"";const r=Qt(e,t);return t+=r.length,r===""?"":n+r+An(e,t)}function Il(e,t){const n=Ti(e,t);return t+=n.length,n===""?"":n+An(e,t)}const Bl=Tn([Ll,Ml,Il]);function Dl(e,t){var n;const r=e.substr(t).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function Ol(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0b")return"";const r=Dl(e,t);return r===""?"":n+r}function Nl(e,t){var n;const r=e.substr(t).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function Fl(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0o")return"";const r=Nl(e,t);return r===""?"":n+r}function zl(e,t){var n;const r=e.substr(t).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function jl(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0x")return"";const r=zl(e,t);return r===""?"":n+r}const Ul=Tn([Ol,Fl,jl]),$l=Tn([Ul,Bl]);function Kl(e,t){const n=$l(e,t);return t+=n.length,n===""?null:{evaluable:new Pl(n),cursor:t}}function Hl(e,t){const n=e.substr(t,1);if(t+=n.length,n!=="(")return null;const r=Si(e,t);if(!r)return null;t=r.cursor,t+=Zt(e,t).length;const i=e.substr(t,1);return t+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:t}}function ql(e,t){var n;return(n=Kl(e,t))!==null&&n!==void 0?n:Hl(e,t)}function Ai(e,t){const n=ql(e,t);if(n)return n;const r=e.substr(t,1);if(t+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=Ai(e,t);return i?(t=i.cursor,{cursor:t,evaluable:new Sl(r,i.evaluable)}):null}function Gl(e,t,n){n+=Zt(t,n).length;const r=e.filter(i=>t.startsWith(i,n))[0];return r?(n+=r.length,n+=Zt(t,n).length,{cursor:n,operator:r}):null}function Yl(e,t){return(n,r)=>{const i=e(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const s=Gl(t,n,r);if(!s)break;r=s.cursor;const a=e(n,r);if(!a)return null;r=a.cursor,o=new Tl(s.operator,o,a.evaluable)}return o?{cursor:r,evaluable:o}:null}}const Xl=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((e,t)=>Yl(e,t),Ai);function Si(e,t){return t+=Zt(e,t).length,Xl(e,t)}function Wl(e){const t=Si(e,0);return!t||t.cursor+Zt(e,t.cursor).length!==e.length?null:t.evaluable}function pt(e){var t;const n=Wl(e);return(t=n?.evaluate())!==null&&t!==void 0?t:null}function Vi(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=pt(e);if(!L(t))return t}return 0}function Zl(e){return String(e)}function Z(e){return t=>t.toFixed(Math.max(Math.min(e,20),0))}function V(e,t,n,r,i){const o=(e-t)/(n-t);return r+o*(i-r)}function cr(e){return String(e.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function j(e,t,n){return Math.min(Math.max(e,t),n)}function Ri(e,t){return(e%t+t)%t}function Ql(e,t){return L(e.step)?Math.max(cr(t),2):cr(e.step)}function Li(e){var t;return(t=e.step)!==null&&t!==void 0?t:1}function Mi(e,t){var n;const r=Math.abs((n=e.step)!==null&&n!==void 0?n:t);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function Ii(e,t){return L(e.step)?null:new El(e.step,t)}function Bi(e){return!L(e.max)&&!L(e.min)?new oe({max:e.max,min:e.min}):!L(e.max)||!L(e.min)?new Cl({max:e.max,min:e.min}):null}function Di(e,t){var n,r,i;return{formatter:(n=e.format)!==null&&n!==void 0?n:Z(Ql(e,t)),keyScale:(r=e.keyScale)!==null&&r!==void 0?r:Li(e),pointerScale:(i=e.pointerScale)!==null&&i!==void 0?i:Mi(e,t)}}function Oi(e){return{format:e.optional.function,keyScale:e.optional.number,max:e.optional.number,min:e.optional.number,pointerScale:e.optional.number,step:e.optional.number}}function Sn(e){return{constraint:e.constraint,textProps:w.fromObject(Di(e.params,e.initialValue))}}class Rt{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class Be{constructor(t){this.target=t}}class se extends Be{constructor(t,n,r){super(t),this.value=n,this.last=r??!0}}class Jl extends Be{constructor(t,n){super(t),this.expanded=n}}class tc extends Be{constructor(t,n){super(t),this.index=n}}class ec extends Be{constructor(t,n){super(t),this.native=n}}class Jt extends Rt{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new z,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const n=this.controller.value;this.emitter_.emit("change",new se(this,n.binding.target.read(),t.options.last))}}class nc{constructor(t,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new z}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function rc(e){if(!("binding"in e))return!1;const t=e.binding;return kn(t)&&"read"in t&&"write"in t}function ic(e,t){const r=Object.keys(t).reduce((i,o)=>{if(i===void 0)return;const s=t[o],a=s(e[o]);return a.succeeded?Object.assign(Object.assign({},i),{[o]:a.value}):void 0},{});return r}function oc(e,t){return e.reduce((n,r)=>{if(n===void 0)return;const i=t(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function sc(e){return e===null?!1:typeof e=="object"}function at(e){return t=>n=>{if(!t&&n===void 0)return{succeeded:!1,value:void 0};if(t&&n===void 0)return{succeeded:!0,value:void 0};const r=e(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function ur(e){return{custom:t=>at(t)(e),boolean:at(t=>typeof t=="boolean"?t:void 0)(e),number:at(t=>typeof t=="number"?t:void 0)(e),string:at(t=>typeof t=="string"?t:void 0)(e),function:at(t=>typeof t=="function"?t:void 0)(e),constant:t=>at(n=>n===t?t:void 0)(e),raw:at(t=>t)(e),object:t=>at(n=>{if(sc(n))return ic(n,t)})(e),array:t=>at(n=>{if(Array.isArray(n))return oc(n,t)})(e)}}const on={optional:ur(!0),required:ur(!1)};function D(e,t){const n=t(on),r=on.required.object(n)(e);return r.succeeded?r.value:void 0}function Q(e,t,n,r){if(t&&!t(e))return!1;const i=D(e,n);return i?r(i):!1}function J(e,t){var n;return At((n=e?.())!==null&&n!==void 0?n:{},t)}function kt(e){return"value"in e}function Ni(e){if(!Pn(e)||!("binding"in e))return!1;const t=e.binding;return kn(t)}const rt="http://www.w3.org/2000/svg";function ye(e){e.offsetHeight}function ac(e,t){const n=e.style.transition;e.style.transition="none",t(),e.style.transition=n}function Vn(e){return e.ontouchstart!==void 0}function lc(){return globalThis}function cc(){return lc().document}function uc(e){const t=e.ownerDocument.defaultView;return t&&"document"in t?e.getContext("2d",{willReadFrequently:!0}):null}const pc={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function De(e,t){const n=e.createElementNS(rt,"svg");return n.innerHTML=pc[t],n}function Fi(e,t,n){e.insertBefore(t,e.children[n])}function Rn(e){e.parentElement&&e.parentElement.removeChild(e)}function zi(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function dc(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])}function ji(e){return e.relatedTarget?e.relatedTarget:"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}function ct(e,t){e.emitter.on("change",n=>{t(n.rawValue)}),t(e.rawValue)}function it(e,t,n){ct(e.value(t),n)}const hc="tp";function k(e){return(n,r)=>[hc,"-",e,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const Kt=k("lbl");function fc(e,t){const n=e.createDocumentFragment();return t.split(`
`).map(i=>e.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(e.createElement("br")),n.appendChild(i)}),n}class Ui{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Kt()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Kt("l")),it(n.props,"label",o=>{L(o)?this.element.classList.add(Kt(void 0,"nol")):(this.element.classList.remove(Kt(void 0,"nol")),dc(r),r.appendChild(fc(t,o)))}),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("div");i.classList.add(Kt("v")),this.element.appendChild(i),this.valueElement=i}}class $i{constructor(t,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Ui(t,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return Q(t,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return J(null,{label:this.props.get("label")})}}function mc(){return["veryfirst","first","last","verylast"]}const pr=k(""),dr={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Oe{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{mc().forEach(r=>{n.classList.remove(pr(void 0,dr[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(pr(void 0,dr[r]))})}),this.viewProps.handleDispose(()=>{Rn(n)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return Q(t,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return J(null,Object.assign({},this.viewProps.exportState()))}}class St extends Oe{constructor(t,n){if(n.value!==n.valueController.value)throw O.shouldNeverHappen();const r=n.valueController.viewProps,i=new $i(t,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new Ui(t,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return Q(t,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,t))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var t,n,r;return J(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(t=this.valueController).exportProps)===null||n===void 0?void 0:n.call(t))!==null&&r!==void 0?r:{}))}}function hr(e){const t=Object.assign({},e);return delete t.value,t}class Ki extends St{constructor(t,n){super(t,n),this.tag=n.tag}importState(t){return Q(t,n=>super.importState(hr(t)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return J(()=>hr(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function vc(e){return kt(e)&&Ni(e.value)}class bc extends Ki{importState(t){return Q(t,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function _c(e){return kt(e)&&rc(e.value)}function Hi(e,t){for(;e.length<t;)e.push(void 0)}function gc(e){const t=[];return Hi(t,e),t}function wc(e){const t=e.indexOf(void 0);return t<0?e:e.slice(0,t)}function yc(e,t){const n=[...wc(e),t];return n.length>e.length?n.splice(0,n.length-e.length):Hi(n,e.length),n}class xc{constructor(t){this.emitter=new z,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=B(gc(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=yc(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Cc(e){if(!("binding"in e))return!1;const t=e.binding;return kn(t)&&"read"in t&&!("write"in t)}class Ec extends Ki{exportState(){return J(()=>super.exportState(),{binding:{readonly:!0}})}}function Pc(e){return kt(e)&&Cc(e.value)}class kc extends Rt{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(t,o=>{r(new ec(this,o.nativeEvent))}),this}off(t,n){return this.controller.buttonController.emitter.off(t,n),this}}function Tc(e,t,n){n?e.classList.add(t):e.classList.remove(t)}function Ft(e,t){return n=>{Tc(e,t,n)}}function Ln(e,t){ct(e,n=>{t.textContent=n??""})}const $e=k("btn");class Ac{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add($e()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("button");r.classList.add($e("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add($e("t")),Ln(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class Sc{constructor(t,n){this.emitter=new z,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Ac(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return Q(t,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return J(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class fr extends Oe{constructor(t,n){const r=new Sc(t,{props:n.buttonProps,viewProps:n.viewProps}),i=new $i(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(t){return Q(t,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return J(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class qi{constructor(t){const[n,r]=t.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}const zt=new qi("2.0.5");function Y(e){return Object.assign({core:zt},e)}const Vc=Y({id:"button",type:"blade",accept(e){const t=D(e,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return t?{params:t}:null},controller(e){return new fr(e.document,{blade:e.blade,buttonProps:w.fromObject({title:e.params.title}),labelProps:w.fromObject({label:e.params.label}),viewProps:e.viewProps})},api(e){return e.controller instanceof fr?new kc(e.controller):null}});function Rc(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function Lc(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function Mc(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function Ic(e){return Pn(e)?"refresh"in e&&typeof e.refresh=="function":!1}function Bc(e,t){if(!we.isBindable(e))throw O.notBindable();return new we(e,t)}class Dc{constructor(t,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new z,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,n,r){const i=r??{},o=this.controller_.element.ownerDocument,s=this.pool_.createBinding(o,Bc(t,n),i),a=this.pool_.createBindingApi(s);return this.add(a,i.index)}addFolder(t){return Lc(this,t)}addButton(t){return Rc(this,t)}addTab(t){return Mc(this,t)}add(t,n){const r=t.controller;return this.controller_.rack.add(r,n),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,t),i=this.pool_.createApi(r);return this.add(i,t.index)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.children.forEach(t=>{Ic(t)&&t.refresh()})}onRackValueChange_(t){const n=t.bladeController,r=this.pool_.createApi(n),i=Ni(n.value)?n.value.binding:null;this.emitter_.emit("change",new se(r,i?i.target.read():n.value.rawValue,t.options.last))}}class Mn extends Rt{constructor(t,n){super(t),this.rackApi_=new Dc(t.rackController,n)}refresh(){this.rackApi_.refresh()}}class In extends Oe{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return Q(t,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return J(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}}function sn(e){return"rackController"in e}class Oc{constructor(t){this.emitter=new z,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const n of this.allItems())if(t(n))return n;return null}includes(t){return this.cache_.has(t)}add(t,n){if(this.includes(t))throw O.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:t,root:this,target:this})}remove(t){const n=this.items_.indexOf(t);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(t);const r=this.extract_(t);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function Nc(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(kt(r)&&r.value===t)return r}return null}function Fc(e){return sn(e)?e.rackController.rack.bcSet_:null}class zc{constructor(t){var n,r;this.emitter=new z,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=t.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new Oc(Fc),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,n){var r;(r=t.parent)===null||r===void 0||r.remove(t),t.parent=this,this.bcSet_.add(t,n)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:n,sender:this}),!n)return;const r=t.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),kt(r))r.value.emitter.on("change",this.onChildValueChange_);else if(sn(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:n,sender:this}),!n)return;const r=t.item;if(kt(r))r.value.emitter.off("change",this.onChildValueChange_);else if(sn(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=t[0],r=t[t.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(t){const n=Nc(this.find(kt),t.sender);if(!n)throw O.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Bn{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const n=new zc({blade:t.root?void 0:t.blade,viewProps:t.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&Fi(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&Rn(t.bladeController.view.element)}}function jt(){return new w({positions:B([],{equals:bl})})}class ae extends w{constructor(t){super(t)}static create(t){const n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=w.createCore(n);return new ae(r)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!L(t)?`${t}px`:"auto"}bindExpandedClass(t,n){const r=()=>{this.styleExpanded?t.classList.add(n):t.classList.remove(n)};it(this,"expanded",r),it(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function jc(e,t){let n=0;return ac(t,()=>{e.set("expandedHeight",null),e.set("temporaryExpanded",!0),ye(t),n=t.clientHeight,e.set("temporaryExpanded",null),ye(t)}),n}function mr(e,t){t.style.height=e.styleHeight}function Dn(e,t){e.value("expanded").emitter.on("beforechange",()=>{if(e.set("completed",!1),L(e.get("expandedHeight"))){const n=jc(e,t);n>0&&e.set("expandedHeight",n)}e.set("shouldFixHeight",!0),ye(t)}),e.emitter.on("change",()=>{mr(e,t)}),mr(e,t),t.addEventListener("transitionend",n=>{n.propertyName==="height"&&e.cleanUpTransition()})}class Gi extends Mn{constructor(t,n){super(t,n),this.emitter_=new z,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new Jl(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){return this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const Yi=k("cnt");class Uc{constructor(t,n){var r;this.className_=k((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Yi()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),it(this.foldable_,"completed",Ft(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),it(n.props,"title",c=>{L(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=t.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const s=t.createElement("div");s.classList.add(this.className_("t")),Ln(n.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=t.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class an extends In{constructor(t,n){var r;const i=ae.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new Uc(t,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Bn({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,Dn(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return Q(t,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return J(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const $c=Y({id:"folder",type:"blade",accept(e){const t=D(e,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return t?{params:t}:null},controller(e){return new an(e.document,{blade:e.blade,expanded:e.params.expanded,props:w.fromObject({title:e.params.title}),viewProps:e.viewProps})},api(e){return e.controller instanceof an?new Gi(e.controller,e.pool):null}}),Kc=k("");function vr(e,t){return Ft(e,Kc(void 0,t))}class ht extends w{constructor(t){var n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=xl(B(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var n,r,i;const o=t??{};return new ht(w.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){ct(this.globalDisabled_,vr(t,"disabled")),it(this,"hidden",vr(t,"hidden"))}bindDisabled(t){ct(this.globalDisabled_,n=>{t.disabled=n})}bindTabIndex(t){ct(this.globalDisabled_,n=>{t.tabIndex=n?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",n=>{n&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var n;const r=t.previousRawValue;r?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const br=k("tbp");class Hc{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(br()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(br("c")),this.element.appendChild(r),this.containerElement=r}}const Ht=k("tbi");class qc{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ht()),n.viewProps.bindClassModifiers(this.element),it(n.props,"selected",o=>{o?this.element.classList.add(Ht(void 0,"sel")):this.element.classList.remove(Ht(void 0,"sel"))});const r=t.createElement("button");r.classList.add(Ht("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(Ht("t")),Ln(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Gc{constructor(t,n){this.emitter=new z,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new qc(t,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class ln extends In{constructor(t,n){const r=new Hc(t,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Bn({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Gc(t,{props:n.itemProps,viewProps:ht.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,it(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(t){return Q(t,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return J(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Yc extends Mn{constructor(t,n){super(t,n),this.emitter_=new z,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const n=this.controller.view.element.ownerDocument,r=new ln(n,{blade:jt(),itemProps:w.fromObject({selected:!1,title:t.title}),props:w.fromObject({selected:!1}),viewProps:ht.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}onSelect_(t){this.emitter_.emit("select",new tc(this,t.rawValue))}}class Xc extends Mn{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addBlade(t){return this.rackApi_.addBlade(t)}}const _r=-1;class Wc{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=B(!0),this.selectedIndex=B(_r),this.items_=[]}add(t,n){const r=n??this.items_.length;this.items_.splice(r,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const n=this.items_.indexOf(t);n<0||(this.items_.splice(n,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=_r,this.empty.rawValue=!0;return}const t=this.items_.findIndex(n=>n.rawValue);t<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const n=this.items_.findIndex(r=>r===t.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const qt=k("tab");class Zc{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(qt(),Yi()),n.viewProps.bindClassModifiers(this.element),ct(n.empty,Ft(this.element,qt(void 0,"nop")));const r=t.createElement("div");r.classList.add(qt("t")),this.element.appendChild(r),this.itemsElement=r;const i=t.createElement("div");i.classList.add(qt("i")),this.element.appendChild(i);const o=t.createElement("div");o.classList.add(qt("c")),this.element.appendChild(o),this.contentsElement=o}}class gr extends In{constructor(t,n){const r=new Wc,i=new Zc(t,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Bn({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(t,n){this.rackController.rack.add(t,n)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const n=t.bladeController;Fi(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const n=t.bladeController;Rn(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}const Xi=Y({id:"tab",type:"blade",accept(e){const t=D(e,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(e){const t=new gr(e.document,{blade:e.blade,viewProps:e.viewProps});return e.params.pages.forEach(n=>{const r=new ln(e.document,{blade:jt(),itemProps:w.fromObject({selected:!1,title:n.title}),props:w.fromObject({selected:!1}),viewProps:ht.create()});t.add(r)}),t},api(e){return e.controller instanceof gr?new Yc(e.controller,e.pool):e.controller instanceof ln?new Xc(e.controller,e.pool):null}});function Qc(e,t){const n=e.accept(t.params);if(!n)return null;const r=D(t.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return e.controller({blade:jt(),document:t.document,params:Object.assign(Object.assign({},n.params),{disabled:r?.disabled,hidden:r?.hidden}),viewProps:ht.create({disabled:r?.disabled,hidden:r?.hidden})})}class On extends Jt{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class Jc{constructor(){this.disabled=!1,this.emitter=new z}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class tu{constructor(t,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new z,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class le{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((n,r)=>r.constrain(n),t)}}function xe(e,t){if(e instanceof t)return e;if(e instanceof le){const n=e.constraints.reduce((r,i)=>r||(i instanceof t?i:null),null);if(n)return n}return null}class ce{constructor(t){this.values=w.fromObject({options:t})}constrain(t){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===t).length>0?t:n[0].value}}function ue(e){var t;const n=on;if(Array.isArray(e))return(t=D({items:e},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof e=="object")return n.required.raw(e).value}function Nn(e){if(Array.isArray(e))return e;const t=[];return Object.keys(e).forEach(n=>{t.push({text:n,value:e[n]})}),t}function Fn(e){return L(e)?null:new ce(Nn(e))}const Ke=k("lst");class eu{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=t.createElement("div"),this.element.classList.add(Ke()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("select");r.classList.add(Ke("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=t.createElement("div");i.classList.add(Ke("m")),i.appendChild(De(t,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,it(this.props_,"options",o=>{zi(this.selectElement),o.forEach(s=>{const a=t.createElement("option");a.textContent=s.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const t=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class gt{constructor(t,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new eu(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const n=t.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(t){return Q(t,null,n=>({options:n.required.custom(ue)}),n=>(this.props.set("options",Nn(n.options)),!0))}exportProps(){return J(null,{options:this.props.get("options")})}}const wr=k("pop");class nu{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(wr()),n.viewProps.bindClassModifiers(this.element),ct(n.shows,Ft(this.element,wr(void 0,"v")))}}class Wi{constructor(t,n){this.shows=B(!1),this.viewProps=n.viewProps,this.view=new nu(t,{shows:this.shows,viewProps:this.viewProps})}}const yr=k("txt");class ru{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(yr()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=t.createElement("input");r.classList.add(yr("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class te{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new ru(t,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);L(i)||(this.value.rawValue=i),this.view.refresh()}}function iu(e){return String(e)}function Zi(e){return e==="false"?!1:!!e}function xr(e){return iu(e)}function ou(e){return t=>e.reduce((n,r)=>n!==null?n:r(t),null)}const su=Z(0);function Ce(e){return su(e)+"%"}function Qi(e){return String(e)}function cn(e){return e}function Ut({primary:e,secondary:t,forward:n,backward:r}){let i=!1;function o(s){i||(i=!0,s(),i=!1)}e.emitter.on("change",s=>{o(()=>{t.setRawValue(n(e.rawValue,t.rawValue),s.options)})}),t.emitter.on("change",s=>{o(()=>{e.setRawValue(r(e.rawValue,t.rawValue),s.options)}),o(()=>{t.setRawValue(n(e.rawValue,t.rawValue),s.options)})}),o(()=>{t.setRawValue(n(e.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function W(e,t){const n=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function ee(e){return{altKey:e.altKey,downKey:e.key==="ArrowDown",shiftKey:e.shiftKey,upKey:e.key==="ArrowUp"}}function dt(e){return{altKey:e.altKey,downKey:e.key==="ArrowLeft",shiftKey:e.shiftKey,upKey:e.key==="ArrowRight"}}function au(e){return e==="ArrowUp"||e==="ArrowDown"}function Ji(e){return au(e)||e==="ArrowLeft"||e==="ArrowRight"}function He(e,t){var n,r;const i=t.ownerDocument.defaultView,o=t.getBoundingClientRect();return{x:e.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:e.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}class Lt{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new z,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var n;t.preventDefault(),(n=t.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(He(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(He(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(He(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchMove_(t){const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchEnd_(t){var n;const r=(n=t.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const tt=k("txt");class lu{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(tt(),tt(void 0,"num")),n.arrayPosition&&this.element.classList.add(tt(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(tt("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(tt()),this.inputElement.classList.add(tt("i"));const i=t.createElement("div");i.classList.add(tt("k")),this.element.appendChild(i),this.knobElement=i;const o=t.createElementNS(rt,"svg");o.classList.add(tt("g")),this.knobElement.appendChild(o);const s=t.createElementNS(rt,"path");s.classList.add(tt("gb")),o.appendChild(s),this.guideBodyElem_=s;const a=t.createElementNS(rt,"path");a.classList.add(tt("gh")),o.appendChild(a),this.guideHeadElem_=a;const l=t.createElement("div");l.classList.add(k("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(tt(void 0,"drg"));return}this.element.classList.add(tt(void 0,"drg"));const n=t.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=j(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class pe{constructor(t,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=B(null),this.view=new lu(t,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Lt(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let s=t;return i!==void 0&&(s=Math.max(s,i)),o!==void 0&&(s=Math.min(s,o)),s}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);L(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const n=W(this.props.get("keyScale"),ee(t));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(t){W(this.props.get("keyScale"),ee(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const n=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const qe=k("sld");class cu{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(qe()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(qe("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=t.createElement("div");i.classList.add(qe("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const t=j(V(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class uu{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new cu(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Lt(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){t.point&&this.value.setRawValue(V(j(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=W(this.props.get("keyScale"),dt(t));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(t){W(this.props.get("keyScale"),dt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ge=k("sldtxt");class pu{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ge());const r=t.createElement("div");r.classList.add(Ge("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Ge("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Ee{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new uu(t,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new pe(t,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new pu(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return Q(t,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const t=this.sliderC_.props;return J(null,{max:t.get("max"),min:t.get("min")})}}function to(e){return{sliderProps:new w({keyScale:e.keyScale,max:e.max,min:e.min}),textProps:new w({formatter:B(e.formatter),keyScale:e.keyScale,pointerScale:B(e.pointerScale)})}}const du={containerUnitSize:"cnt-usz"};function eo(e){return`--${du[e]}`}function ne(e){return Oi(e)}function bt(e){if(rn(e))return D(e,ne)}function lt(e,t){if(!e)return;const n=[],r=Ii(e,t);r&&n.push(r);const i=Bi(e);return i&&n.push(i),new le(n)}function hu(e){return e?e.major===zt.major:!1}function no(e){if(e==="inline"||e==="popup")return e}function de(e,t){e.write(t)}const ve=k("ckb");class fu{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ve()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("label");r.classList.add(ve("l")),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("input");i.classList.add(ve("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=t.createElement("div");o.classList.add(ve("w")),this.labelElement.appendChild(o);const s=De(t,"check");o.appendChild(s),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class mu{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new fu(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const n=t.currentTarget;this.value.rawValue=n.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}function vu(e){const t=[],n=Fn(e.options);return n&&t.push(n),new le(t)}const bu=Y({id:"input-bool",type:"input",accept:(e,t)=>{if(typeof e!="boolean")return null;const n=D(t,r=>({options:r.optional.custom(ue),readonly:r.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Zi,constraint:e=>vu(e.params),writer:e=>de},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&xe(r,ce);return i?new gt(t,{props:new w({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new mu(t,{value:n,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="boolean"?null:e.controller.valueController instanceof gt?new On(e.controller):null}}),Ct=k("col");class _u{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ct()),n.foldable.bindExpandedClass(this.element,Ct(void 0,"expanded")),it(n.foldable,"completed",Ft(this.element,Ct(void 0,"cpl")));const r=t.createElement("div");r.classList.add(Ct("h")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Ct("s")),r.appendChild(i),this.swatchElement=i;const o=t.createElement("div");if(o.classList.add(Ct("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const s=t.createElement("div");s.classList.add(Ct("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null}}function gu(e,t,n){const r=j(e/255,0,1),i=j(t/255,0,1),o=j(n/255,0,1),s=Math.max(r,i,o),a=Math.min(r,i,o),l=s-a;let c=0,p=0;const u=(a+s)/2;return l!==0&&(p=l/(1-Math.abs(s+a-1)),r===s?c=(i-o)/l:i===s?c=2+(o-r)/l:c=4+(r-i)/l,c=c/6+(c<0?1:0)),[c*360,p*100,u*100]}function wu(e,t,n){const r=(e%360+360)%360,i=j(t/100,0,1),o=j(n/100,0,1),s=(1-Math.abs(2*o-1))*i,a=s*(1-Math.abs(r/60%2-1)),l=o-s/2;let c,p,u;return r>=0&&r<60?[c,p,u]=[s,a,0]:r>=60&&r<120?[c,p,u]=[a,s,0]:r>=120&&r<180?[c,p,u]=[0,s,a]:r>=180&&r<240?[c,p,u]=[0,a,s]:r>=240&&r<300?[c,p,u]=[a,0,s]:[c,p,u]=[s,0,a],[(c+l)*255,(p+l)*255,(u+l)*255]}function yu(e,t,n){const r=j(e/255,0,1),i=j(t/255,0,1),o=j(n/255,0,1),s=Math.max(r,i,o),a=Math.min(r,i,o),l=s-a;let c;l===0?c=0:s===r?c=60*(((i-o)/l%6+6)%6):s===i?c=60*((o-r)/l+2):c=60*((r-i)/l+4);const p=s===0?0:l/s,u=s;return[c,p*100,u*100]}function ro(e,t,n){const r=Ri(e,360),i=j(t/100,0,1),o=j(n/100,0,1),s=o*i,a=s*(1-Math.abs(r/60%2-1)),l=o-s;let c,p,u;return r>=0&&r<60?[c,p,u]=[s,a,0]:r>=60&&r<120?[c,p,u]=[a,s,0]:r>=120&&r<180?[c,p,u]=[0,s,a]:r>=180&&r<240?[c,p,u]=[0,a,s]:r>=240&&r<300?[c,p,u]=[a,0,s]:[c,p,u]=[s,0,a],[(c+l)*255,(p+l)*255,(u+l)*255]}function xu(e,t,n){const r=n+t*(100-Math.abs(2*n-100))/200;return[e,r!==0?t*(100-Math.abs(2*n-100))/r:0,n+t*(100-Math.abs(2*n-100))/(2*100)]}function Cu(e,t,n){const r=100-Math.abs(n*(200-t)/100-100);return[e,r!==0?t*n/r:0,n*(200-t)/(2*100)]}function ot(e){return[e[0],e[1],e[2]]}function Ne(e,t){return[e[0],e[1],e[2],t]}const Eu={hsl:{hsl:(e,t,n)=>[e,t,n],hsv:xu,rgb:wu},hsv:{hsl:Cu,hsv:(e,t,n)=>[e,t,n],rgb:ro},rgb:{hsl:gu,hsv:yu,rgb:(e,t,n)=>[e,t,n]}};function Nt(e,t){return[t==="float"?1:e==="rgb"?255:360,t==="float"?1:e==="rgb"?255:100,t==="float"?1:e==="rgb"?255:100]}function Pu(e,t){return e===t?t:Ri(e,t)}function io(e,t,n){var r;const i=Nt(t,n);return[t==="rgb"?j(e[0],0,i[0]):Pu(e[0],i[0]),j(e[1],0,i[1]),j(e[2],0,i[2]),j((r=e[3])!==null&&r!==void 0?r:1,0,1)]}function Cr(e,t,n,r){const i=Nt(t,n),o=Nt(t,r);return e.map((s,a)=>s/i[a]*o[a])}function oo(e,t,n){const r=Cr(e,t.mode,t.type,"int"),i=Eu[t.mode][n.mode](...r);return Cr(i,n.mode,"int",n.type)}class A{static black(){return new A([0,0,0],"rgb")}constructor(t,n){this.type="int",this.mode=n,this.comps_=io(t,n,this.type)}getComponents(t){return Ne(oo(ot(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const ft=k("colp");class ku{constructor(t,n){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(ft()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(ft("hsv"));const i=t.createElement("div");i.classList.add(ft("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=t.createElement("div");o.classList.add(ft("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const s=t.createElement("div");if(s.classList.add(ft("rgb")),this.textsView_=n.textsView,s.appendChild(this.textsView_.element),this.element.appendChild(s),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const a=t.createElement("div");a.classList.add(ft("a"));const l=t.createElement("div");l.classList.add(ft("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=t.createElement("div");c.classList.add(ft("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Tu(e){return e==="int"?"int":e==="float"?"float":void 0}function zn(e){return D(e,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(Tu)}),expanded:t.optional.boolean,picker:t.optional.custom(no),readonly:t.optional.constant(!1)}))}function Vt(e){return e?.1:1}function so(e){var t;return(t=e.color)===null||t===void 0?void 0:t.type}class jn{constructor(t,n){this.type="float",this.mode=n,this.comps_=io(t,n,this.type)}getComponents(t){return Ne(oo(ot(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const Au={int:(e,t)=>new A(e,t),float:(e,t)=>new jn(e,t)};function Un(e,t,n){return Au[n](e,t)}function Su(e){return e.type==="float"}function Vu(e){return e.type==="int"}function Ru(e){const t=e.getComponents(),n=Nt(e.mode,"int");return new A([Math.round(V(t[0],0,1,0,n[0])),Math.round(V(t[1],0,1,0,n[1])),Math.round(V(t[2],0,1,0,n[2])),t[3]],e.mode)}function Lu(e){const t=e.getComponents(),n=Nt(e.mode,"int");return new jn([V(t[0],0,n[0],0,1),V(t[1],0,n[1],0,1),V(t[2],0,n[2],0,1),t[3]],e.mode)}function H(e,t){if(e.type===t)return e;if(Vu(e)&&t==="float")return Lu(e);if(Su(e)&&t==="int")return Ru(e);throw O.shouldNeverHappen()}function Mu(e,t){return e.alpha===t.alpha&&e.mode===t.mode&&e.notation===t.notation&&e.type===t.type}function et(e,t){const n=e.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*t:parseFloat(e),t)}const Iu={deg:e=>e,grad:e=>e*360/400,rad:e=>e*360/(2*Math.PI),turn:e=>e*360};function ao(e){const t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);const n=parseFloat(t[1]),r=t[2];return Iu[r](n)}function lo(e){const t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[et(t[1],255),et(t[2],255),et(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Bu(e){const t=lo(e);return t?new A(t,"rgb"):null}function co(e){const t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[et(t[1],255),et(t[2],255),et(t[3],255),et(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Du(e){const t=co(e);return t?new A(t,"rgb"):null}function uo(e){const t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[ao(t[1]),et(t[2],100),et(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ou(e){const t=uo(e);return t?new A(t,"hsl"):null}function po(e){const t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[ao(t[1]),et(t[2],100),et(t[3],100),et(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Nu(e){const t=po(e);return t?new A(t,"hsl"):null}function ho(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const n=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Fu(e){const t=ho(e);return t?new A(t,"rgb"):null}function fo(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),V(parseInt(t[4]+t[4],16),0,255,0,1)];const n=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),V(parseInt(n[4],16),0,255,0,1)]:null}function zu(e){const t=fo(e);return t?new A(t,"rgb"):null}function mo(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function ju(e){return t=>{const n=mo(t);return n?Un(n,"rgb",e):null}}function vo(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Uu(e){return t=>{const n=vo(t);return n?Un(n,"rgb",e):null}}const $u=[{parser:ho,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:fo,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:lo,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:co,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:uo,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:po,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:mo,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:vo,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Ku(e){return $u.reduce((t,{parser:n,result:r})=>t||(n(e)?r:null),null)}function Hu(e,t="int"){const n=Ku(e);return n?n.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:t}):null:null}function he(e){const t=[Fu,zu,Bu,Du,Ou,Nu];t.push(ju("int"),Uu("int"));const n=ou(t);return r=>{const i=n(r);return i?H(i,e):null}}function qu(e){const t=he("int");if(typeof e!="string")return A.black();const n=t(e);return n??A.black()}function bo(e){const t=j(Math.floor(e),0,255).toString(16);return t.length===1?`0${t}`:t}function $n(e,t="#"){const n=ot(e.getComponents("rgb")).map(bo).join("");return`${t}${n}`}function Kn(e,t="#"){const n=e.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(bo).join("");return`${t}${r}`}function _o(e){const t=Z(0),n=H(e,"int");return`rgb(${ot(n.getComponents("rgb")).map(i=>t(i)).join(", ")})`}function be(e){const t=Z(2),n=Z(0);return`rgba(${H(e,"int").getComponents("rgb").map((o,s)=>(s===3?t:n)(o)).join(", ")})`}function Gu(e){const t=[Z(0),Ce,Ce],n=H(e,"int");return`hsl(${ot(n.getComponents("hsl")).map((i,o)=>t[o](i)).join(", ")})`}function Yu(e){const t=[Z(0),Ce,Ce,Z(2)];return`hsla(${H(e,"int").getComponents("hsl").map((i,o)=>t[o](i)).join(", ")})`}function go(e,t){const n=Z(t==="float"?2:0),r=["r","g","b"],i=H(e,t);return`{${ot(i.getComponents("rgb")).map((s,a)=>`${r[a]}: ${n(s)}`).join(", ")}}`}function Xu(e){return t=>go(t,e)}function wo(e,t){const n=Z(2),r=Z(t==="float"?2:0),i=["r","g","b","a"];return`{${H(e,t).getComponents("rgb").map((a,l)=>{const c=l===3?n:r;return`${i[l]}: ${c(a)}`}).join(", ")}}`}function Wu(e){return t=>wo(t,e)}const Zu=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:$n},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Kn},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:_o},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:be},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Gu},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Yu},...["int","float"].reduce((e,t)=>[...e,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:Xu(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:Wu(t)}],[])];function yo(e){return Zu.reduce((t,n)=>t||(Mu(n.format,e)?n.stringifier:null),null)}const Gt=k("apl");class Qu{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Gt()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(Gt("b")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Gt("c")),r.appendChild(i),this.colorElem_=i;const o=t.createElement("div");o.classList.add(Gt("m")),this.element.appendChild(o),this.markerElem_=o;const s=t.createElement("div");s.classList.add(Gt("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}update_(){const t=this.value.rawValue,n=t.getComponents("rgb"),r=new A([n[0],n[1],n[2],0],"rgb"),i=new A([n[0],n[1],n[2],255],"rgb"),o=["to right",be(r),be(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=be(t);const s=V(n[3],0,1,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class Ju{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Qu(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Lt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=t.point.x/t.bounds.width,i=this.value.rawValue,[o,s,a]=i.getComponents("hsv");this.value.setRawValue(new A([o,s,a,r],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=W(Vt(!0),dt(t));if(n===0)return;const r=this.value.rawValue,[i,o,s,a]=r.getComponents("hsv");this.value.setRawValue(new A([i,o,s,a+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){W(Vt(!0),dt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const It=k("coltxt");function tp(e){const t=e.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(n.reduce((r,i)=>{const o=e.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},e.createDocumentFragment())),t}class ep{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(It()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(It("m")),this.modeElem_=tp(t),this.modeElem_.classList.add(It("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(It("mm")),i.appendChild(De(t,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=t.createElement("div");o.classList.add(It("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),ct(n.mode,s=>{this.modeElem_.value=s})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){zi(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=t.createElement("div");r.classList.add(It("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function np(e){return Z(e==="float"?2:0)}function rp(e,t,n){const r=Nt(e,t)[n];return new oe({min:0,max:r})}function ip(e,t,n){return new pe(e,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:t.parser,props:w.fromObject({formatter:np(t.colorType),keyScale:Vt(!1),pointerScale:t.colorType==="float"?.01:1}),value:B(0,{constraint:rp(t.colorMode,t.colorType,n)}),viewProps:t.viewProps})}function op(e,t){const n={colorMode:t.colorMode,colorType:t.colorType,parser:pt,viewProps:t.viewProps};return[0,1,2].map(r=>{const i=ip(e,n,r);return Ut({primary:t.value,secondary:i.value,forward(o){return H(o,t.colorType).getComponents(t.colorMode)[r]},backward(o,s){const a=t.colorMode,c=H(o,t.colorType).getComponents(a);c[r]=s;const p=Un(Ne(ot(c),c[3]),a,t.colorType);return H(p,"int")}}),i})}function sp(e,t){const n=new te(e,{parser:he("int"),props:w.fromObject({formatter:$n}),value:B(A.black()),viewProps:t.viewProps});return Ut({primary:t.value,secondary:n.value,forward:r=>new A(ot(r.getComponents()),r.mode),backward:(r,i)=>new A(Ne(ot(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function ap(e){return e!=="hex"}class lp{constructor(t,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=B(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new ep(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const n=this.colorMode.rawValue;return ap(n)?op(t,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):sp(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const n=t.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const Ye=k("hpl");class cp{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Ye()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(Ye("c")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Ye("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[n]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=_o(new A([n,100,100],"hsv"));const r=V(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class up{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new cp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Lt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=V(j(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,o,s,a]=i.getComponents("hsv");this.value.setRawValue(new A([r,o,s,a],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=W(Vt(!1),dt(t));if(n===0)return;const r=this.value.rawValue,[i,o,s,a]=r.getComponents("hsv");this.value.setRawValue(new A([i+n,o,s,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){W(Vt(!1),dt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Xe=k("svp"),Er=64;class pp{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Xe()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("canvas");r.height=Er,r.width=Er,r.classList.add(Xe("c")),this.element.appendChild(r),this.canvasElement=r;const i=t.createElement("div");i.classList.add(Xe("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=uc(this.canvasElement);if(!t)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,s=t.getImageData(0,0,i,o),a=s.data;for(let p=0;p<o;p++)for(let u=0;u<i;u++){const f=V(u,0,i,0,100),g=V(p,0,o,100,0),b=ro(r[0],f,g),y=(p*i+u)*4;a[y]=b[0],a[y+1]=b[1],a[y+2]=b[2],a[y+3]=255}t.putImageData(s,0,0);const l=V(r[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=V(r[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class dp{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new pp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Lt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=V(t.point.x,0,t.bounds.width,0,100),i=V(t.point.y,0,t.bounds.height,100,0),[o,,,s]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new A([o,r,i,s],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Ji(t.key)&&t.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),s=Vt(!1),a=W(s,dt(t)),l=W(s,ee(t));a===0&&l===0||this.value.setRawValue(new A([n,r+a,i+l,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const n=Vt(!1),r=W(n,dt(t)),i=W(n,ee(t));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class hp{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new up(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new dp(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Ju(t,{value:this.value,viewProps:this.viewProps}),text:new pe(t,{parser:pt,props:w.fromObject({pointerScale:.01,keyScale:.1,formatter:Z(2)}),value:B(0,{constraint:new oe({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Ut({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new A(o,r.mode)}}),this.textsC_=new lp(t,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new ku(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const We=k("colsw");class fp{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(We()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(We("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=t.createElement("button");i.classList.add(We("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Kn(t)}onValueChange_(){this.update_()}}class mp{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new fp(t,{value:this.value,viewProps:this.viewProps})}}class Hn{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ae.create(n.expanded),this.swatchC_=new mp(t,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new te(t,{parser:n.parser,props:w.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new _u(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Wi(t,{viewProps:this.viewProps}):null;const i=new hp(t,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Ut({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,s)=>s})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Dn(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=ji(t);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!Vn(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function vp(e){return ot(e.getComponents("rgb")).reduce((t,n)=>t<<8|Math.floor(n)&255,0)}function bp(e){return e.getComponents("rgb").reduce((t,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return t<<8|i},0)>>>0}function _p(e){return new A([e>>16&255,e>>8&255,e&255],"rgb")}function gp(e){return new A([e>>24&255,e>>16&255,e>>8&255,V(e&255,0,255,0,1)],"rgb")}function wp(e){return typeof e!="number"?A.black():_p(e)}function yp(e){return typeof e!="number"?A.black():gp(e)}function _e(e,t){return typeof e!="object"||L(e)?!1:t in e&&typeof e[t]=="number"}function xo(e){return _e(e,"r")&&_e(e,"g")&&_e(e,"b")}function Co(e){return xo(e)&&_e(e,"a")}function Eo(e){return xo(e)}function qn(e,t){if(e.mode!==t.mode||e.type!==t.type)return!1;const n=e.getComponents(),r=t.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function Pr(e){return"a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b]}function xp(e){const t=yo(e);return t?(n,r)=>{de(n,t(r))}:null}function Cp(e){const t=e?bp:vp;return(n,r)=>{de(n,t(r))}}function Ep(e,t,n){const i=H(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b),e.writeProperty("a",i.a)}function Pp(e,t,n){const i=H(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b)}function kp(e,t){return(n,r)=>{e?Ep(n,r,t):Pp(n,r,t)}}function Tp(e){var t;return!!(!((t=e?.color)===null||t===void 0)&&t.alpha)}function Ap(e){return e?t=>Kn(t,"0x"):t=>$n(t,"0x")}function Sp(e){return"color"in e||e.view==="color"}const Vp=Y({id:"input-color-number",type:"input",accept:(e,t)=>{if(typeof e!="number"||!Sp(t))return null;const n=zn(t);return n?{initialValue:e,params:Object.assign(Object.assign({},n),{supportsAlpha:Tp(t)})}:null},binding:{reader:e=>e.params.supportsAlpha?yp:wp,equals:qn,writer:e=>Cp(e.params.supportsAlpha)},controller:e=>{var t,n;return new Hn(e.document,{colorType:"int",expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:Ap(e.params.supportsAlpha),parser:he("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:e.params.supportsAlpha,value:e.value,viewProps:e.viewProps})}});function Rp(e,t){if(!Eo(e))return H(A.black(),t);if(t==="int"){const n=Pr(e);return new A(n,"rgb")}if(t==="float"){const n=Pr(e);return new jn(n,"rgb")}return H(A.black(),"int")}function Lp(e){return Co(e)}function Mp(e){return t=>{const n=Rp(t,e);return H(n,"int")}}function Ip(e,t){return n=>e?wo(n,t):go(n,t)}const Bp=Y({id:"input-color-object",type:"input",accept:(e,t)=>{var n;if(!Eo(e))return null;const r=zn(t);return r?{initialValue:e,params:Object.assign(Object.assign({},r),{colorType:(n=so(t))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:e=>Mp(e.params.colorType),equals:qn,writer:e=>kp(Lp(e.initialValue),e.params.colorType)},controller:e=>{var t,n;const r=Co(e.initialValue);return new Hn(e.document,{colorType:e.params.colorType,expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:Ip(r,e.params.colorType),parser:he("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:e.value,viewProps:e.viewProps})}}),Dp=Y({id:"input-color-string",type:"input",accept:(e,t)=>{if(typeof e!="string"||t.view==="text")return null;const n=Hu(e,so(t));if(!n)return null;const r=yo(n);if(!r)return null;const i=zn(t);return i?{initialValue:e,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>qu,equals:qn,writer:e=>{const t=xp(e.params.format);if(!t)throw O.notBindable();return t}},controller:e=>{var t,n;return new Hn(e.document,{colorType:e.params.format.type,expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:e.params.stringifier,parser:he("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:e.params.format.alpha,value:e.value,viewProps:e.viewProps})}});class Gn{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const n=this.asm_.toComponents(t).map((r,i)=>{var o,s;return(s=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&s!==void 0?s:r});return this.asm_.fromComponents(n)}}const kr=k("pndtxt");class Op{constructor(t,n){this.textViews=n.textViews,this.element=t.createElement("div"),this.element.classList.add(kr()),this.textViews.forEach(r=>{const i=t.createElement("div");i.classList.add(kr("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function Np(e,t,n){return new pe(e,{arrayPosition:n===0?"fst":n===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[n].textProps,value:B(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}class Yn{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>Np(t,n,i)),this.acs_.forEach((r,i)=>{Ut({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,s)=>{const a=n.assembly.toComponents(o);return a[i]=s,n.assembly.fromComponents(a)}})}),this.view=new Op(t,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class Fp extends Jt{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}function zp(e,t){const n=[],r=Ii(e,t);r&&n.push(r);const i=Bi(e);i&&n.push(i);const o=Fn(e.options);return o&&n.push(o),new le(n)}const jp=Y({id:"input-number",type:"input",accept:(e,t)=>{if(typeof e!="number")return null;const n=D(t,r=>Object.assign(Object.assign({},Oi(r)),{options:r.optional.custom(ue),readonly:r.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Vi,constraint:e=>zp(e.params,e.initialValue),writer:e=>de},controller:e=>{const t=e.value,n=e.constraint,r=n&&xe(n,ce);if(r)return new gt(e.document,{props:new w({options:r.values.value("options")}),value:t,viewProps:e.viewProps});const i=Di(e.params,t.rawValue),o=n&&xe(n,oe);return o?new Ee(e.document,Object.assign(Object.assign({},to(Object.assign(Object.assign({},i),{keyScale:B(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:pt,value:t,viewProps:e.viewProps})):new pe(e.document,{parser:pt,props:w.fromObject(i),value:t,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="number"?null:e.controller.valueController instanceof Ee?new Fp(e.controller):e.controller.valueController instanceof gt?new On(e.controller):null}});class _t{constructor(t=0,n=0){this.x=t,this.y=n}getComponents(){return[this.x,this.y]}static isObject(t){if(L(t))return!1;const n=t.x,r=t.y;return!(typeof n!="number"||typeof r!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y}toObject(){return{x:this.x,y:this.y}}}const Po={toComponents:e=>e.getComponents(),fromComponents:e=>new _t(...e)},Bt=k("p2d");class Up{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Bt()),n.viewProps.bindClassModifiers(this.element),ct(n.expanded,Ft(this.element,Bt(void 0,"expanded")));const r=t.createElement("div");r.classList.add(Bt("h")),this.element.appendChild(r);const i=t.createElement("button");i.classList.add(Bt("b")),i.appendChild(De(t,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=t.createElement("div");if(o.classList.add(Bt("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const s=t.createElement("div");s.classList.add(Bt("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null}}const mt=k("p2dp");class $p{constructor(t,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(mt()),n.layout==="popup"&&this.element.classList.add(mt(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(mt("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=t.createElementNS(rt,"svg");i.classList.add(mt("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=t.createElementNS(rt,"line");o.classList.add(mt("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const s=t.createElementNS(rt,"line");s.classList.add(mt("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);const a=t.createElementNS(rt,"line");a.classList.add(mt("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=t.createElement("div");l.classList.add(mt("m")),this.padElement.appendChild(l),this.markerElem_=l,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=V(t,-r,+r,0,100),o=V(n,-r,+r,0,100),s=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${s}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Tr(e,t,n){return[W(t[0],dt(e)),W(t[1],ee(e))*(n?1:-1)]}class Kp{constructor(t,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new $p(t,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Lt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=this.props.get("max"),i=V(t.point.x,0,t.bounds.width,-r,+r),o=V(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-r,+r);this.value.setRawValue(new _t(i,o),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Ji(t.key)&&t.preventDefault();const[n,r]=Tr(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new _t(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[n,r]=Tr(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Hp{constructor(t,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ae.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Wi(t,{viewProps:this.viewProps}):null;const o=new Kp(t,{layout:n.pickerLayout,props:new w({invertsY:B(n.invertsY),max:B(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new Yn(t,{assembly:Po,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Up(t,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Ut({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Dn(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=ji(t);r&&n.contains(r)||r&&r===this.view.buttonElement&&!Vn(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function qp(e){return _t.isObject(e)?new _t(e.x,e.y):new _t}function Gp(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y)}function Yp(e,t){return new Gn({assembly:Po,components:[lt(Object.assign(Object.assign({},e),e.x),t.x),lt(Object.assign(Object.assign({},e),e.y),t.y)]})}function Ar(e,t){var n,r;if(!L(e.min)||!L(e.max))return Math.max(Math.abs((n=e.min)!==null&&n!==void 0?n:0),Math.abs((r=e.max)!==null&&r!==void 0?r:0));const i=Li(e);return Math.max(Math.abs(i)*10,Math.abs(t)*10)}function Xp(e,t){var n,r;const i=Ar(At(e,(n=e.x)!==null&&n!==void 0?n:{}),t.x),o=Ar(At(e,(r=e.y)!==null&&r!==void 0?r:{}),t.y);return Math.max(i,o)}function Wp(e){if(!("y"in e))return!1;const t=e.y;return t&&"inverted"in t?!!t.inverted:!1}const Zp=Y({id:"input-point2d",type:"input",accept:(e,t)=>{if(!_t.isObject(e))return null;const n=D(t,r=>Object.assign(Object.assign({},ne(r)),{expanded:r.optional.boolean,picker:r.optional.custom(no),readonly:r.optional.constant(!1),x:r.optional.custom(bt),y:r.optional.object(Object.assign(Object.assign({},ne(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:e,params:n}:null},binding:{reader:()=>qp,constraint:e=>Yp(e.params,e.initialValue),equals:_t.equals,writer:()=>Gp},controller:e=>{var t,n;const r=e.document,i=e.value,o=e.constraint,s=[e.params.x,e.params.y];return new Hp(r,{axes:i.rawValue.getComponents().map((a,l)=>{var c;return Sn({constraint:o.components[l],initialValue:a,params:At(e.params,(c=s[l])!==null&&c!==void 0?c:{})})}),expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,invertsY:Wp(e.params),max:Xp(e.params,i.rawValue),parser:pt,pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:e.viewProps})}});class Dt{constructor(t=0,n=0,r=0){this.x=t,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(L(t))return!1;const n=t.x,r=t.y,i=t.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ko={toComponents:e=>e.getComponents(),fromComponents:e=>new Dt(...e)};function Qp(e){return Dt.isObject(e)?new Dt(e.x,e.y,e.z):new Dt}function Jp(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}function td(e,t){return new Gn({assembly:ko,components:[lt(Object.assign(Object.assign({},e),e.x),t.x),lt(Object.assign(Object.assign({},e),e.y),t.y),lt(Object.assign(Object.assign({},e),e.z),t.z)]})}const ed=Y({id:"input-point3d",type:"input",accept:(e,t)=>{if(!Dt.isObject(e))return null;const n=D(t,r=>Object.assign(Object.assign({},ne(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(bt),y:r.optional.custom(bt),z:r.optional.custom(bt)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Qp,constraint:e=>td(e.params,e.initialValue),equals:Dt.equals,writer:e=>Jp},controller:e=>{const t=e.value,n=e.constraint,r=[e.params.x,e.params.y,e.params.z];return new Yn(e.document,{assembly:ko,axes:t.rawValue.getComponents().map((i,o)=>{var s;return Sn({constraint:n.components[o],initialValue:i,params:At(e.params,(s=r[o])!==null&&s!==void 0?s:{})})}),parser:pt,value:t,viewProps:e.viewProps})}});class Ot{constructor(t=0,n=0,r=0,i=0){this.x=t,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(L(t))return!1;const n=t.x,r=t.y,i=t.z,o=t.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z&&t.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const To={toComponents:e=>e.getComponents(),fromComponents:e=>new Ot(...e)};function nd(e){return Ot.isObject(e)?new Ot(e.x,e.y,e.z,e.w):new Ot}function rd(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}function id(e,t){return new Gn({assembly:To,components:[lt(Object.assign(Object.assign({},e),e.x),t.x),lt(Object.assign(Object.assign({},e),e.y),t.y),lt(Object.assign(Object.assign({},e),e.z),t.z),lt(Object.assign(Object.assign({},e),e.w),t.w)]})}const od=Y({id:"input-point4d",type:"input",accept:(e,t)=>{if(!Ot.isObject(e))return null;const n=D(t,r=>Object.assign(Object.assign({},ne(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(bt),x:r.optional.custom(bt),y:r.optional.custom(bt),z:r.optional.custom(bt)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>nd,constraint:e=>id(e.params,e.initialValue),equals:Ot.equals,writer:e=>rd},controller:e=>{const t=e.value,n=e.constraint,r=[e.params.x,e.params.y,e.params.z,e.params.w];return new Yn(e.document,{assembly:To,axes:t.rawValue.getComponents().map((i,o)=>{var s;return Sn({constraint:n.components[o],initialValue:i,params:At(e.params,(s=r[o])!==null&&s!==void 0?s:{})})}),parser:pt,value:t,viewProps:e.viewProps})}});function sd(e){const t=[],n=Fn(e.options);return n&&t.push(n),new le(t)}const ad=Y({id:"input-string",type:"input",accept:(e,t)=>{if(typeof e!="string")return null;const n=D(t,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(ue)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Qi,constraint:e=>sd(e.params),writer:e=>de},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&xe(r,ce);return i?new gt(t,{props:new w({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new te(t,{parser:o=>o,props:w.fromObject({formatter:cn}),value:n,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="string"?null:e.controller.valueController instanceof gt?new On(e.controller):null}}),fe={monitor:{defaultInterval:200,defaultRows:3}},Sr=k("mll");class ld{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Sr()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("textarea");r.classList.add(Sr("i")),r.style.height=`calc(var(${eo("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class Xn{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new ld(t,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const Vr=k("sgl");class cd{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Vr()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(Vr("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.value.rawValue,n=t[t.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class Wn{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new cd(t,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}const ud=Y({id:"monitor-bool",type:"monitor",accept:(e,t)=>{if(typeof e!="boolean")return null;const n=D(t,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Zi},controller:e=>{var t;return e.value.rawValue.length===1?new Wn(e.document,{formatter:xr,value:e.value,viewProps:e.viewProps}):new Xn(e.document,{formatter:xr,rows:(t=e.params.rows)!==null&&t!==void 0?t:fe.monitor.defaultRows,value:e.value,viewProps:e.viewProps})}});class pd extends Jt{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const vt=k("grl");class dd{constructor(t,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(vt()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=t.createElementNS(rt,"svg");r.classList.add(vt("g")),r.style.height=`calc(var(${eo("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(rt,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=t.createElement("div");o.classList.add(vt("t"),k("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:n}=this.element,r=this.value.rawValue.length-1,i=this.props_.get("min"),o=this.props_.get("max"),s=[];this.value.rawValue.forEach((u,f)=>{if(u===void 0)return;const g=V(f,0,r,0,t),b=V(u,i,o,n,0);s.push([g,b].join(","))}),this.lineElem_.setAttributeNS(null,"points",s.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(vt("t","a"));return}const c=V(this.cursor_.rawValue,0,r,0,t),p=V(l,i,o,n,0);a.style.left=`${c}px`,a.style.top=`${p}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(vt("t","a"))||(a.classList.add(vt("t","a"),vt("t","in")),ye(a),a.classList.remove(vt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Ao{constructor(t,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=B(-1),this.view=new dd(t,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Vn(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Lt(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return Q(t,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return J(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(V(t.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(V(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function un(e){return L(e.format)?Z(2):e.format}function hd(e){var t;return e.value.rawValue.length===1?new Wn(e.document,{formatter:un(e.params),value:e.value,viewProps:e.viewProps}):new Xn(e.document,{formatter:un(e.params),rows:(t=e.params.rows)!==null&&t!==void 0?t:fe.monitor.defaultRows,value:e.value,viewProps:e.viewProps})}function fd(e){var t,n,r;return new Ao(e.document,{formatter:un(e.params),rows:(t=e.params.rows)!==null&&t!==void 0?t:fe.monitor.defaultRows,props:w.fromObject({max:(n=e.params.max)!==null&&n!==void 0?n:100,min:(r=e.params.min)!==null&&r!==void 0?r:0}),value:e.value,viewProps:e.viewProps})}function Rr(e){return e.view==="graph"}const md=Y({id:"monitor-number",type:"monitor",accept:(e,t)=>{if(typeof e!="number")return null;const n=D(t,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:e,params:n}:null},binding:{defaultBufferSize:e=>Rr(e)?64:1,reader:e=>Vi},controller:e=>Rr(e.params)?fd(e):hd(e),api:e=>e.controller.valueController instanceof Ao?new pd(e.controller):null}),vd=Y({id:"monitor-string",type:"monitor",accept:(e,t)=>{if(typeof e!="string")return null;const n=D(t,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Qi},controller:e=>{var t;const n=e.value;return n.rawValue.length>1||e.params.multiline?new Xn(e.document,{formatter:cn,rows:(t=e.params.rows)!==null&&t!==void 0?t:fe.monitor.defaultRows,value:n,viewProps:e.viewProps}):new Wn(e.document,{formatter:cn,value:n,viewProps:e.viewProps})}});class bd{constructor(){this.map_=new Map}get(t){var n;return(n=this.map_.get(t))!==null&&n!==void 0?n:null}has(t){return this.map_.has(t)}add(t,n){return this.map_.set(t,n),t.viewProps.handleDispose(()=>{this.map_.delete(t)}),n}}class _d{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}function gd(e,t){var n;const r=e.accept(t.target.read(),t.params);if(L(r))return null;const i={target:t.target,initialValue:r.initialValue,params:r.params},o=D(t.params,u=>({disabled:u.optional.boolean,hidden:u.optional.boolean,label:u.optional.string,tag:u.optional.string})),s=e.binding.reader(i),a=e.binding.constraint?e.binding.constraint(i):void 0,l=new _d({reader:s,target:t.target,writer:e.binding.writer(i)}),c=new nc(B(s(r.initialValue),{constraint:a,equals:e.binding.equals}),l),p=e.controller({constraint:a,document:t.document,initialValue:r.initialValue,params:r.params,value:c,viewProps:ht.create({disabled:o?.disabled,hidden:o?.hidden})});return new bc(t.document,{blade:jt(),props:w.fromObject({label:"label"in t.params?(n=o?.label)!==null&&n!==void 0?n:null:t.target.key}),tag:o?.tag,value:c,valueController:p})}class wd{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}function yd(e,t){return t===0?new Jc:new tu(e,t??fe.monitor.defaultInterval)}function xd(e,t){var n,r,i;const o=e.accept(t.target.read(),t.params);if(L(o))return null;const s={target:t.target,initialValue:o.initialValue,params:o.params},a=D(t.params,f=>({bufferSize:f.optional.number,disabled:f.optional.boolean,hidden:f.optional.boolean,interval:f.optional.number,label:f.optional.string})),l=e.binding.reader(s),c=(r=(n=a?.bufferSize)!==null&&n!==void 0?n:e.binding.defaultBufferSize&&e.binding.defaultBufferSize(o.params))!==null&&r!==void 0?r:1,p=new xc({binding:new wd({reader:l,target:t.target}),bufferSize:c,ticker:yd(t.document,a?.interval)}),u=e.controller({document:t.document,params:o.params,value:p,viewProps:ht.create({disabled:a?.disabled,hidden:a?.hidden})});return u.viewProps.bindDisabled(p.ticker),u.viewProps.handleDispose(()=>{p.ticker.dispose()}),new Ec(t.document,{blade:jt(),props:w.fromObject({label:"label"in t.params?(i=a?.label)!==null&&i!==void 0?i:null:t.target.key}),value:p,valueController:u})}class Cd{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,n){if(!hu(n.core))throw O.notCompatible(t,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(t,n,r){return this.pluginsMap_.inputs.reduce((i,o)=>i??gd(o,{document:t,target:n,params:r}),null)}createMonitor_(t,n,r){return this.pluginsMap_.monitors.reduce((i,o)=>i??xd(o,{document:t,params:r,target:n}),null)}createBinding(t,n,r){const i=n.read();if(L(i))throw new O({context:{key:n.key},type:"nomatchingcontroller"});const o=this.createInput_(t,n,r);if(o)return o;const s=this.createMonitor_(t,n,r);if(s)return s;throw new O({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(t,n){const r=this.pluginsMap_.blades.reduce((i,o)=>i??Qc(o,{document:t,params:n}),null);if(!r)throw new O({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(t){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var o,s;return r||((s=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:t}))!==null&&s!==void 0?s:null)},null);return this.apiCache_.add(t,n??new Jt(t))}createMonitorBindingApi_(t){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var o,s;return r||((s=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:t}))!==null&&s!==void 0?s:null)},null);return this.apiCache_.add(t,n??new Jt(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(_c(t))return this.createInputBindingApi_(t);if(Pc(t))return this.createMonitorBindingApi_(t);throw O.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(vc(t))return this.createBindingApi(t);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:t,pool:this}),null);if(!n)throw O.shouldNeverHappen();return this.apiCache_.add(t,n)}}const Ed=new bd;function Pd(){const e=new Cd(Ed);return[Zp,ed,od,ad,jp,Dp,Bp,Vp,bu,ud,vd,md,Vc,$c,Xi].forEach(t=>{e.register("core",t)}),e}class kd extends Rt{constructor(t){super(t),this.emitter_=new z,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new se(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class Td extends Rt{}class Ad extends Rt{constructor(t){super(t),this.emitter_=new z,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new se(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class Sd extends Rt{constructor(t){super(t),this.emitter_=new z,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new se(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const Vd=function(){return{id:"list",type:"blade",core:zt,accept(e){const t=D(e,n=>({options:n.required.custom(ue),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return t?{params:t}:null},controller(e){const t=new ce(Nn(e.params.options)),n=B(e.params.value,{constraint:t}),r=new gt(e.document,{props:new w({options:t.values.value("options")}),value:n,viewProps:e.viewProps});return new St(e.document,{blade:e.blade,props:w.fromObject({label:e.params.label}),value:n,valueController:r})},api(e){return!(e.controller instanceof St)||!(e.controller.valueController instanceof gt)?null:new kd(e.controller)}}}();class Rd extends Gi{constructor(t,n){super(t,n)}get element(){return this.controller.view.element}}class Ld extends an{constructor(t,n){super(t,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const Lr=k("spr");class Md{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Lr()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("hr");r.classList.add(Lr("r")),this.element.appendChild(r)}}class Mr extends Oe{constructor(t,n){super(Object.assign(Object.assign({},n),{view:new Md(t,{viewProps:n.viewProps})}))}}const Id={id:"separator",type:"blade",core:zt,accept(e){const t=D(e,n=>({view:n.required.constant("separator")}));return t?{params:t}:null},controller(e){return new Mr(e.document,{blade:e.blade,viewProps:e.viewProps})},api(e){return e.controller instanceof Mr?new Td(e.controller):null}},Bd={id:"slider",type:"blade",core:zt,accept(e){const t=D(e,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return t?{params:t}:null},controller(e){var t,n;const r=(t=e.params.value)!==null&&t!==void 0?t:0,i=new oe({max:e.params.max,min:e.params.min}),o=B(r,{constraint:i}),s=new Ee(e.document,Object.assign(Object.assign({},to({formatter:(n=e.params.format)!==null&&n!==void 0?n:Zl,keyScale:B(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:Mi(e.params,r)})),{parser:pt,value:o,viewProps:e.viewProps}));return new St(e.document,{blade:e.blade,props:w.fromObject({label:e.params.label}),value:o,valueController:s})},api(e){return!(e.controller instanceof St)||!(e.controller.valueController instanceof Ee)?null:new Ad(e.controller)}},Dd=function(){return{id:"text",type:"blade",core:zt,accept(e){const t=D(e,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return t?{params:t}:null},controller(e){var t;const n=B(e.params.value),r=new te(e.document,{parser:e.params.parse,props:w.fromObject({formatter:(t=e.params.format)!==null&&t!==void 0?t:i=>String(i)}),value:n,viewProps:e.viewProps});return new St(e.document,{blade:e.blade,props:w.fromObject({label:e.params.label}),value:n,valueController:r})},api(e){return!(e.controller instanceof St)||!(e.controller.valueController instanceof te)?null:new Sd(e.controller)}}}();function Od(e){const t=e.createElement("div");return t.classList.add(k("dfw")()),e.body&&e.body.appendChild(t),t}function Nd(e,t,n){if(e.querySelector(`style[data-tp-style=${t}]`))return;const r=e.createElement("style");r.dataset.tpStyle=t,r.textContent=n,e.head.appendChild(r)}class Fd extends Rd{constructor(t){var n,r;const i=t??{},o=(n=i.document)!==null&&n!==void 0?n:cc(),s=Pd(),a=new Ld(o,{expanded:i.expanded,blade:jt(),props:w.fromObject({title:i.title}),viewProps:ht.create()});super(a,s),this.pool_=s,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:Od(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw O.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw O.alreadyDisposed();if(this.usesDefaultWrapper_){const n=t.parentElement;n&&n.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&Nd(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(r=>{this.pool_.register(t.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Vd,Id,Bd,Xi,Dd]})}}new qi("4.0.5");const Ir={text:"20 Projects With React",maxPoints:5e4,particleSize:2,mouseRepel:160,velocityInfluence:1e4,randomInfluence:.4,mouseRepelDistance:.1,accel:20,velocityDamp:.99},zd=`#version 300 es
in vec4 color;
in vec2 position;
in vec2 ogPosition;
in vec2 velocity;
in float randomSeed;

out vec2 newPosition;
out vec2 newVelocity;
out vec4 vColor;

uniform vec2 mousePos;
uniform vec2 mouseVelocity;
uniform vec2 resolution;
uniform float mouseRepel;
uniform float velocityInfluence;
uniform float randomInfluence;
uniform float mouseRepelDistance;
uniform float accel;
uniform float velocityDamp;
uniform float dt;

float rand(float seed) {
  return fract(sin(seed * 12.9898) * 43758.5453);
}

vec2 rotateVector(float angle, vec2 vector) {
  if (abs(vector.x) < 0.0001 && abs(vector.y) < 0.0001) {
    return vector;
  }
  float cosAngle = cos(angle);
  float sinAngle = sin(angle);
  return vec2(
    vector.x * cosAngle - vector.y * sinAngle,
    vector.x * sinAngle + vector.y * cosAngle
  );
}
void main() {
  vec2 normalizedMousePos = mousePos / resolution;
  normalizedMousePos.y = 1.0 - normalizedMousePos.y; // Flip Y coordinate
  
  vec2 normalizedPosition = position / resolution;
  vec2 direction = normalizedPosition - normalizedMousePos;
  
  // Calculate distance to mouse
  float distSquared = dot(direction, direction);

  // Initialize new velocity with current velocity
  newVelocity = velocity;

  // 1. accelFromMouse logic
  if (distSquared < mouseRepelDistance * mouseRepelDistance) {
    float dist = sqrt(distSquared);
    float force = min(1.0, 1.0 - dist / mouseRepelDistance);
    
    // Basic repulsion from mouse position
    float randomFactor = 1.0 + randomInfluence * (2.0 * rand(newVelocity.x + newVelocity.y) - 1.0);
    vec2 repelForce = normalize(direction) * force * mouseRepel * dt * randomFactor;
    
    // Add influence from mouse velocity
    float velocityMag = length(mouseVelocity);
    if (velocityMag > 0.01) {
      vec2 normVelocity = mouseVelocity / velocityMag;
      normVelocity.y = -normVelocity.y; // Flip Y coordinate
      vec2 velocityForce = normVelocity * force * velocityInfluence * dt * sqrt(velocityMag) * 
                         (1.0 + randomInfluence * (2.0 * rand(newVelocity.x - newVelocity.y) - 1.0));
      repelForce += velocityForce;
    }
    
    newVelocity += repelForce;
  }
  
  // 2. accelerate logic - spring force toward original position
  vec2 toOriginal = ogPosition - position;
  float distToOrigSquared = dot(toOriginal, toOriginal);
  
  if (distToOrigSquared > 0.0001) {
    float distToOrig = sqrt(distToOrigSquared);
    float springForce = min(1.0 - distToOrig, -1.0);
    vec2 accelForce = normalize(toOriginal) * springForce * accel * dt;
    newVelocity -= accelForce;
  }
  
  // 3. move logic
  newPosition = position + newVelocity * dt;
  newVelocity *= velocityDamp;

  // Set the output color for the fragment shader
  vColor = color;

  gl_Position = vec4(0, 0, 0, 1);
}
`,jd=`#version 300 es
in vec2 position;
in vec2 velocity;
in vec4 color;

out vec4 vColor;
uniform vec2 mousePos;
uniform vec2 resolution;
uniform float particleSize;

void main() {
  // Convert to clip space
  vec2 pos = (position / resolution) * 2.0 - 1.0;
  gl_Position = vec4(pos, 0, 1);
  
  gl_PointSize = particleSize;

  // Set the color
  vColor = color;
}
`,Br=`#version 300 es
precision highp float;

in vec4 vColor;
out vec4 fragColor;

void main() {
  vec2 center = gl_PointCoord - 0.5;
  float dist = length(center);
  
  // Create a circular particle with smooth edges
  float alpha = 1.0 - smoothstep(0.3, 0.5, dist);
  
  fragColor = vec4(vColor.rgb, vColor.a * alpha);
}
`;function Ud(e,t,n){return Kd(e.text==="",(r,i)=>{const{width:o,height:s}=r.canvas;e.text&&(r.font=`${120*i}px ChocoladineDemo`,r.fillStyle="cyan",r.textAlign="center",r.textBaseline="middle",r.fillText(e.text,o/2,s/2))},t,n,e.maxPoints)}function $d(e,t){const n=e?3.84:1;return t<125e3*n?1:Math.floor(t/(125e3*n))}function Kd(e,t,n,r,i){try{const o=$d(e,i);n=Math.floor(n*o),r=Math.floor(r*o);const s=[],a=document.createElement("canvas");a.width=n,a.height=r;const l=a.getContext("2d");if(!l)throw new Error("2D context not supported");l.clearRect(0,0,n,r),l.fillStyle="red",t(l,o);const p=l.getImageData(0,0,n,r).data,u=p.length;for(let f=0;f<u;f+=4){const g=f/4%n/o;let b=Math.floor(f/4/n);b=r-b,b/=o;const y=p[f]/255,T=p[f+1]/255,E=p[f+2]/255;p[f+3]/255>0&&s.push([new I(g,b),[y,T,E]])}if(s.length>i){for(let f=s.length-1;f>0;f--){const g=Math.floor(Math.random()*(f+1));[s[f],s[g]]=[s[g],s[f]]}s.length=i}return s}catch(o){return S.error("Likely out of memory. Try reducing the number of points."),console.error("Error populating from path:",o),[]}}function Hd({options:e,forceUpdate:t}){const n=_.useRef(null),r=_.useRef(null),i=_.useRef(null),[o,s]=_.useState(null),[a,l]=_.useState(null),c=_.useRef(null),p=_.useRef(0),[u,f,g]=Ba({autoResize:!0,contextId:"webgl2",setup:(d,h)=>{d.enable(d.BLEND),d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),b(d,h);const m=ir(d,[zd,Br],{transformFeedbackVaryings:["newPosition","newVelocity"],transformFeedbackMode:d.SEPARATE_ATTRIBS}),x=ir(d,[jd,Br]);s({transformFeedback:m,render:x}),c.current=d.createTransformFeedback()},resize(d){const{canvas:{width:h,height:m}}=d;d.viewport(0,0,h,m),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT),d.clearColor(0,0,0,1),b(d,d.canvas)}}),b=_.useCallback((d,h)=>{if(!d||!h)return;const m=Ud(e,h.width,h.height),x=m.length,R=new Float32Array(x*4),C=new Float32Array(x*2),P=new Float32Array(x*2),N=new Float32Array(x*2),U=new Float32Array(x);for(let nt=0;nt<x;nt++){const[yt,xt]=m[nt];R.set([xt[0],xt[1],xt[2],1],nt*4),C.set([yt.x,yt.y],nt*2),P.set([yt.x,yt.y],nt*2),N.set([0,0],nt*2),U[nt]=Math.random()}const $={color:{numComponents:4,data:R},position:{numComponents:2,data:C},ogPosition:{numComponents:2,data:P},velocity:{numComponents:2,data:N},randomSeed:{numComponents:1,data:U}},st={color:{numComponents:4,data:R},position:{numComponents:2,data:C},ogPosition:{numComponents:2,data:P},velocity:{numComponents:2,data:N},randomSeed:{numComponents:1,data:U}},Mt=tr(d,$),Fe=tr(d,st);l({position1:Mt,position2:Fe})},[e]);_.useEffect(()=>{u&&f&&b(u,f)},[u,f,b,e.maxPoints,e.text]),Ia(d=>{if(!u||!o||!a||!c.current)return;const{canvas:h}=u;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT);const{transformFeedback:m,render:x}=o,R=p.current,C=(R+1)%2,P=R===0?a.position1:a.position2,N=R===0?a.position2:a.position1,U=n.current||new I(h.width/2,h.height/2);let $=r.current?.mult(1/d)??null;!$&&U&&i.current&&($=U.sub(i.current).mult(1/d)),i.current=U,u.useProgram(m.program),nr(u,m,P),Qe(m,{mousePos:[U.x,U.y],mouseVelocity:[$?.x??0,$?.y??0],resolution:[h.width,h.height],mouseRepelDistance:e.mouseRepelDistance,mouseRepel:e.mouseRepel,velocityInfluence:e.velocityInfluence,randomInfluence:e.randomInfluence,accel:e.accel,velocityDamp:e.velocityDamp,dt:Math.min(d/1e3,.01)}),u.enable(u.RASTERIZER_DISCARD),u.bindTransformFeedback(u.TRANSFORM_FEEDBACK,c.current),u.bindBufferBase(u.TRANSFORM_FEEDBACK_BUFFER,0,N.attribs.position.buffer),u.bindBufferBase(u.TRANSFORM_FEEDBACK_BUFFER,1,N.attribs.velocity.buffer),u.beginTransformFeedback(u.POINTS),sr(u,P,u.POINTS),u.endTransformFeedback(),u.bindTransformFeedback(u.TRANSFORM_FEEDBACK,null),u.disable(u.RASTERIZER_DISCARD),u.useProgram(x.program),nr(u,x,N),Qe(x,{resolution:[h.width,h.height],particleSize:e.particleSize}),sr(u,N,u.POINTS),p.current=C});const y=_.useRef(!1),T=d=>{if(y.current)return;const h=f?.getBoundingClientRect();if(!h)return;const m=d.clientX,x=d.clientY,R=new I(m-h.left,x-h.top);n.current=R,i.current||(i.current=R)};_.useRef(null);const E=d=>{if(y.current)return;const h=f?.getBoundingClientRect();if(!h)return;const m=d.touches[0].clientX,x=d.touches[0].clientY,R=new I(m-h.left,x-h.top);n.current=R,i.current||(i.current=R)};return Ue("mousemove",T),Ue("touchstart",E),Ue("touchmove",E),Yt.jsx("canvas",{ref:g,className:"am-canvas"})}function Yd(){const[e]=_.useState({...Ir}),[t,n]=_.useState({});return _.useEffect(()=>{const r=new Fd;{const i=r.addFolder({title:"Options",expanded:!1});i.addBinding(e,"text",{label:"Text"}).on("change",()=>n({}));const o=i.addBinding(e,"maxPoints",{min:1e3,max:5e5,step:1,label:"Max Points"}).on("change",()=>n({}));i.addBinding(e,"particleSize",{min:.1,max:10,step:.1,label:"Particle Size"}),i.addBinding(e,"mouseRepel",{min:0,max:1e3,step:1,label:"Mouse Repel"}),i.addBinding(e,"mouseRepelDistance",{min:0,max:.5,step:.001,label:"Mouse Repel Distance"}),i.addBinding(e,"velocityInfluence",{min:0,max:3e4,step:1,label:"Velocity Influence"}),i.addBinding(e,"randomInfluence",{min:0,max:2,step:.01,label:"Random Influence"}),i.addBinding(e,"accel",{min:0,max:1e3,step:1,label:"Acceleration"}),i.addBinding(e,"velocityDamp",{min:.01,max:1,step:.001,label:"Velocity Damp"}),i.addButton({title:"Reset to Defaults"}).on("click",()=>{Object.assign(e,Ir),r.refresh()});const s=i.addButton({title:"I haz gud PC"}).on("click",()=>{e.maxPoints<2e6?(S.warn("Warning: Large amounts of points may freeze your browser, depending on your hardware.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),o.max=2e6,s.dispose(),r.refresh()):S.info("You already have 2 million points!")})}{const i=r.addFolder({title:"Presets",expanded:!1});i.addButton({title:"Floaty"}).on("click",()=>{Object.assign(e,{mouseRepel:200,velocityInfluence:5e3,mouseRepelDistance:.1,accel:8,velocityDamp:.995}),r.refresh()}),i.addButton({title:"Reactive"}).on("click",()=>{Object.assign(e,{mouseRepel:1e3,velocityInfluence:1e4,mouseRepelDistance:.2,accel:30,velocityDamp:.98}),r.refresh()}),i.addButton({title:"Sticky"}).on("click",()=>{Object.assign(e,{mouseRepel:100,velocityInfluence:1e4,mouseRepelDistance:.08,accel:40,velocityDamp:.97}),r.refresh()}),i.addButton({title:"Chaotic"}).on("click",()=>{Object.assign(e,{mouseRepel:400,velocityInfluence:3e4,mouseRepelDistance:.4,accel:15,velocityDamp:.992}),r.refresh()}),i.addButton({title:"Cat"}).on("click",()=>{Object.assign(e,{text:"",maxPoints:5e5}),r.refresh(),n({})})}return()=>{r.dispose()}},[e]),Yt.jsxs("section",{className:"am-hero",children:[Yt.jsx(vl,{}),Yt.jsx(Hd,{options:e,forceUpdate:t}),Yt.jsx("img",{src:"./assets/reactLogo.svg",alt:"logo react",className:"am-logo-react"})]})}export{Yd as default};
